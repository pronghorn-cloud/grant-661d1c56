{"openapi":"3.0.0","info":{"title":"Pronghorn API","version":"0.0.1","description":"\n## Pronghorn Vue/Node/Postgres Monorepo API\n\nA production-ready API server with the following features:\n\n- **Authentication**: Local (username/password), Google OAuth 2.0, Microsoft Entra ID SSO\n- **Authorization**: JWT-based with cookie support and token refresh\n- **Database**: PostgreSQL with connection pooling\n- **WebSocket**: Real-time LLM interactions (OpenAI, Anthropic Claude, Google Gemini)\n- **Logging**: Winston with daily rotation\n- **Security**: Helmet, CORS, rate limiting\n\n### Authentication Flow\n\n1. **Local Auth**: POST to `/auth/login` with email/password\n2. **Google SSO**: Redirect to `/auth/google`\n3. **Microsoft SSO**: Redirect to `/auth/microsoft`\n\nAll authenticated endpoints require a valid JWT token in the Authorization header or session cookie.\n      ","contact":{"name":"API Support","email":"support@example.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"servers":[{"url":"/api/v1","description":"API Server"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT access token"},"cookieAuth":{"type":"apiKey","in":"cookie","name":"pronghorn.sid","description":"Session cookie authentication"}},"schemas":{"User":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"User unique identifier"},"email":{"type":"string","format":"email","description":"User email address"},"display_name":{"type":"string","description":"User display name"},"oauth_provider":{"type":"string","enum":["local","google","microsoft"],"description":"Authentication provider"},"email_verified":{"type":"boolean","description":"Whether email is verified"},"created_at":{"type":"string","format":"date-time","description":"Account creation timestamp"},"last_login":{"type":"string","format":"date-time","description":"Last login timestamp"}}},"LoginRequest":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","minLength":8,"example":"securePassword123"}}},"RegisterRequest":{"type":"object","required":["email","password","display_name"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","minLength":8,"example":"securePassword123"},"display_name":{"type":"string","minLength":2,"maxLength":100,"example":"John Doe"}}},"AuthResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Login successful"},"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string","description":"JWT access token"},"refreshToken":{"type":"string","description":"JWT refresh token"}}},"LLMRequest":{"type":"object","required":["message"],"properties":{"message":{"type":"string","description":"User message to send to LLM","example":"Hello, how are you?"},"provider":{"type":"string","enum":["openai","anthropic","google"],"default":"openai","description":"LLM provider to use"},"model":{"type":"string","description":"Specific model to use","example":"gpt-4o"},"stream":{"type":"boolean","default":false,"description":"Whether to stream the response"}}},"LLMResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"provider":{"type":"string","example":"openai"},"model":{"type":"string","example":"gpt-4o"},"response":{"type":"string","description":"LLM response text"},"usage":{"type":"object","properties":{"prompt_tokens":{"type":"integer"},"completion_tokens":{"type":"integer"},"total_tokens":{"type":"integer"}}}}},"Error":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","description":"Error message"},"code":{"type":"string","description":"Error code"}}},"HealthCheck":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","degraded","unhealthy"],"example":"healthy"},"timestamp":{"type":"string","format":"date-time"},"version":{"type":"string","example":"2.0.0"},"uptime":{"type":"number","description":"Server uptime in seconds"},"database":{"type":"object","properties":{"connected":{"type":"boolean"},"poolStats":{"type":"object","properties":{"totalCount":{"type":"integer"},"idleCount":{"type":"integer"},"waitingCount":{"type":"integer"}}}}}}},"Skill":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Unique identifier","example":"550e8400-e29b-41d4-a716-446655440000"},"name":{"type":"string","description":"Name of the skill","example":"Code Review Assistant"},"description":{"type":"string","nullable":true,"description":"Brief description of the skill","example":"Helps review code for best practices and potential issues"},"content":{"type":"string","description":"The prompt content/template","example":"You are a code review expert. Analyze the following code..."},"color":{"type":"string","nullable":true,"description":"Color for UI display (hex or named color)","example":"#3B82F6"},"image_url":{"type":"string","nullable":true,"description":"URL to an image/icon for the skill","example":"https://example.com/icons/code-review.png"},"created_by":{"type":"string","description":"User ID or identifier who created the skill","example":"user@example.com"},"created_date":{"type":"string","format":"date-time","description":"When the skill was created","example":"2024-01-15T10:30:00Z"},"updated_date":{"type":"string","format":"date-time","description":"When the skill was last updated","example":"2024-01-16T14:20:00Z"},"version":{"type":"integer","description":"Version number, incremented on each update","example":1}}},"SkillInput":{"type":"object","required":["name","content"],"properties":{"name":{"type":"string","description":"Name of the skill","example":"Code Review Assistant"},"description":{"type":"string","description":"Brief description of the skill","example":"Helps review code for best practices"},"content":{"type":"string","description":"The prompt content/template","example":"You are a code review expert..."},"color":{"type":"string","description":"Color for UI display","example":"#3B82F6"},"image_url":{"type":"string","description":"URL to an image/icon","example":"https://example.com/icon.png"}}},"SkillUpdateInput":{"type":"object","properties":{"name":{"type":"string","description":"Name of the skill","example":"Updated Code Review Assistant"},"description":{"type":"string","description":"Brief description of the skill","example":"Updated description"},"content":{"type":"string","description":"The prompt content/template","example":"Updated prompt content..."},"color":{"type":"string","description":"Color for UI display","example":"#10B981"},"image_url":{"type":"string","description":"URL to an image/icon","example":"https://example.com/new-icon.png"}}},"SkillsPagination":{"type":"object","properties":{"page":{"type":"integer","description":"Current page number","example":1},"limit":{"type":"integer","description":"Items per page (max 500)","example":50},"total":{"type":"integer","description":"Total number of items","example":120},"totalPages":{"type":"integer","description":"Total number of pages","example":3},"hasNextPage":{"type":"boolean","description":"Whether there is a next page","example":true},"hasPrevPage":{"type":"boolean","description":"Whether there is a previous page","example":false}}},"SkillsListResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","items":{"$ref":"#/components/schemas/Skill"}},"pagination":{"$ref":"#/components/schemas/SkillsPagination"}}},"SkillResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"$ref":"#/components/schemas/Skill"}}},"SkillCreateResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Skill created successfully"},"data":{"$ref":"#/components/schemas/Skill"}}},"SkillDeleteResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Skill deleted successfully"},"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}}}},"SkillsErrorResponse":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Skill not found"},"code":{"type":"string","example":"NOT_FOUND"}}},"UserProfile":{"type":"object","description":"Complete user profile object","properties":{"id":{"type":"string","format":"uuid","description":"Unique user identifier","example":"123e4567-e89b-12d3-a456-426614174000"},"email":{"type":"string","format":"email","description":"User's email address (unique)","example":"user@example.com"},"display_name":{"type":"string","description":"User's display name","example":"John Doe"},"avatar_url":{"type":"string","nullable":true,"description":"URL to user's avatar image","example":"https://example.com/avatars/john.jpg"},"language_preference":{"type":"string","enum":["en","fr"],"description":"User's preferred language","default":"en","example":"en"},"role":{"type":"string","enum":["superadmin","admin","user"],"description":"User's primary role","example":"user"},"additional_roles":{"type":"array","items":{"type":"string"},"description":"Additional custom roles assigned to user","example":["moderator","reviewer"]},"oauth_provider":{"type":"string","enum":["local","google","microsoft"],"nullable":true,"description":"OAuth provider if using SSO","example":"google"},"email_verified":{"type":"boolean","description":"Whether email has been verified","example":true},"is_blocked":{"type":"boolean","description":"Whether user account is blocked","example":false},"blocked_reason":{"type":"string","nullable":true,"description":"Reason for blocking (if blocked)","example":null},"blocked_at":{"type":"string","format":"date-time","nullable":true,"description":"When the user was blocked"},"created_at":{"type":"string","format":"date-time","description":"Account creation timestamp","example":"2024-01-15T10:30:00Z"},"updated_at":{"type":"string","format":"date-time","description":"Last profile update timestamp","example":"2024-06-20T14:45:00Z"},"last_login":{"type":"string","format":"date-time","nullable":true,"description":"Last login timestamp","example":"2024-06-25T09:00:00Z"}}},"CreateUserRequest":{"type":"object","required":["email","display_name"],"description":"Request body for creating a new user (admin only)","properties":{"email":{"type":"string","format":"email","description":"User's email address (must be unique)","example":"newuser@example.com"},"display_name":{"type":"string","minLength":2,"maxLength":100,"description":"User's display name","example":"Jane Smith"},"password":{"type":"string","minLength":8,"description":"Temporary password (auto-generated if not provided)","example":"TempPass123!"},"role":{"type":"string","enum":["admin","user"],"default":"user","description":"User's role (cannot assign equal or higher than your own)","example":"user"},"language_preference":{"type":"string","enum":["en","fr"],"default":"en","description":"User's preferred language","example":"en"},"email_verified":{"type":"boolean","default":false,"description":"Mark email as pre-verified","example":false}}},"CreateUserResponse":{"type":"object","description":"Response after creating a new user","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User created successfully. Please share the temporary password securely with the user."},"user":{"$ref":"#/components/schemas/UserProfile"},"temporaryPassword":{"type":"string","description":"Generated or provided password (shown only once)","example":"xK9#mP2$vL5@nQ8"}}},"UpdateProfileRequest":{"type":"object","description":"Request body for updating user profile","properties":{"display_name":{"type":"string","minLength":2,"maxLength":100,"description":"User's display name","example":"John Smith"},"avatar_url":{"type":"string","maxLength":500,"nullable":true,"description":"URL to avatar image (must be valid HTTP/HTTPS URL)","example":"https://example.com/avatar.jpg"},"language_preference":{"type":"string","enum":["en","fr"],"description":"Preferred language","example":"fr"}}},"AdminUpdateUserRequest":{"type":"object","description":"Request body for admin updating a user","properties":{"display_name":{"type":"string","minLength":2,"maxLength":100,"description":"User's display name","example":"John Smith"},"avatar_url":{"type":"string","maxLength":500,"nullable":true,"description":"URL to avatar image"},"language_preference":{"type":"string","enum":["en","fr"],"description":"Preferred language"},"email_verified":{"type":"boolean","description":"Email verification status","example":true}}},"ChangePasswordRequest":{"type":"object","required":["currentPassword","newPassword","confirmPassword"],"description":"Request body for changing password","properties":{"currentPassword":{"type":"string","description":"Current password for verification","example":"OldPass123!"},"newPassword":{"type":"string","minLength":8,"description":"New password (minimum 8 characters)","example":"NewPass456!"},"confirmPassword":{"type":"string","description":"Must match newPassword","example":"NewPass456!"}}},"UpdateRoleRequest":{"type":"object","description":"Request body for updating user role","properties":{"role":{"type":"string","enum":["superadmin","admin","user"],"description":"Primary role (subject to hierarchy restrictions)","example":"admin"},"additional_roles":{"type":"array","items":{"type":"string","maxLength":50},"description":"Custom additional roles","example":["moderator","reviewer"]}}},"BlockUserRequest":{"type":"object","description":"Request body for blocking a user","properties":{"reason":{"type":"string","description":"Reason for blocking the user","example":"Violation of terms of service"}}},"ResetPasswordRequest":{"type":"object","description":"Request body for admin password reset","properties":{"password":{"type":"string","minLength":8,"description":"Specific password to set (auto-generated if not provided)","example":"NewTempPass123!"}}},"ResetPasswordResponse":{"type":"object","description":"Response after resetting a user's password","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Password has been reset. Please share the new password securely with the user."},"temporaryPassword":{"type":"string","description":"The new password (shown only once)","example":"xK9#mP2$vL5@nQ8"},"userId":{"type":"string","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"email":{"type":"string","format":"email","example":"user@example.com"}}},"ResetTokenResponse":{"type":"object","description":"Response after generating a password reset token","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Password reset token generated"},"resetToken":{"type":"string","description":"Plain reset token (shown only once)","example":"a1b2c3d4e5f6g7h8i9j0..."},"expiresAt":{"type":"string","format":"date-time","description":"Token expiration time (24 hours for admin-generated)","example":"2024-06-26T09:00:00Z"},"resetUrl":{"type":"string","description":"Full URL for password reset","example":"https://app.example.com/auth/reset?token=a1b2c3d4..."}}},"UserListResponse":{"type":"object","description":"Paginated list of users","properties":{"success":{"type":"boolean","example":true},"users":{"type":"array","items":{"$ref":"#/components/schemas/UserProfile"}},"pagination":{"type":"object","properties":{"page":{"type":"integer","description":"Current page number","example":1},"limit":{"type":"integer","description":"Items per page","example":20},"total":{"type":"integer","description":"Total number of users","example":150},"totalPages":{"type":"integer","description":"Total number of pages","example":8}}}}},"AuditLogEntry":{"type":"object","description":"Single audit log entry","properties":{"id":{"type":"string","format":"uuid"},"action":{"type":"string","description":"Action performed","example":"profile_updated"},"details":{"type":"object","description":"Additional action details"},"ip_address":{"type":"string","description":"IP address of actor","example":"192.168.1.1"},"created_at":{"type":"string","format":"date-time"},"actor_email":{"type":"string","description":"Email of user who performed action"},"actor_display_name":{"type":"string","description":"Display name of actor"}}},"AuditLogResponse":{"type":"object","description":"User audit log response","properties":{"success":{"type":"boolean","example":true},"audit_log":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogEntry"}}}},"PasswordResetRequest":{"type":"object","description":"Pending password reset request","properties":{"id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"requested_at":{"type":"string","format":"date-time"},"expires_at":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["pending","used","expired"]}}},"SuccessResponse":{"type":"object","description":"Generic success response","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Operation completed successfully"}}},"ErrorResponse":{"type":"object","description":"Error response","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","description":"Error message","example":"Validation error"},"code":{"type":"string","description":"Error code","example":"VALIDATION_ERROR"},"details":{"type":"object","description":"Additional error details"}}}},"responses":{"UnauthorizedError":{"description":"Authentication required or invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error","type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Authentication required"},"code":{"type":"string","example":"UNAUTHORIZED"}}}}}},"NotFoundError":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error","type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"User not found"},"code":{"type":"string","example":"NOT_FOUND"}}}}}},"ValidationError":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error","type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Validation error"},"code":{"type":"string","example":"BAD_REQUEST"},"details":{"type":"object"}}}}}},"ForbiddenError":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Insufficient permissions"},"code":{"type":"string","example":"FORBIDDEN"}}}}}},"ConflictError":{"description":"Resource conflict (e.g., email already exists)","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Email already registered"},"code":{"type":"string","example":"CONFLICT"}}}}}}}},"tags":[{"name":"Health","description":"Health check and status endpoints"},{"name":"Authentication","description":"User authentication and authorization"},{"name":"Users","description":"User management endpoints"},{"name":"LLM","description":"Large Language Model interactions"},{"name":"Skills","description":"Agent skills (prompts) management operations"},{"name":"Profile","description":"Self-service profile management for authenticated users"},{"name":"Admin - Users","description":"User management operations (admin/superadmin only)"},{"name":"Admin - Password Resets","description":"Password reset management (admin only)"}],"paths":{"/auth/register":{"post":{"summary":"Register a new user","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}}},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"400":{"description":"Validation error"},"409":{"description":"Email already exists"}}}},"/auth/login":{"post":{"summary":"Login with email and password","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Invalid credentials"}}}},"/auth/logout":{"post":{"summary":"Logout current user","tags":["Authentication"],"security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"Logout successful"}}}},"/auth/refresh":{"post":{"summary":"Refresh access token","tags":["Authentication"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"refreshToken":{"type":"string"}}}}}},"responses":{"200":{"description":"Token refreshed successfully"},"401":{"description":"Invalid refresh token"}}}},"/auth/me":{"get":{"summary":"Get current user profile","tags":["Authentication"],"security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"User profile","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"user":{"$ref":"#/components/schemas/User"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/auth/google":{"get":{"summary":"Initiate Google OAuth login","tags":["Authentication"],"responses":{"302":{"description":"Redirect to Google OAuth"}}}},"/auth/google/callback":{"get":{"summary":"Google OAuth callback","tags":["Authentication"],"responses":{"302":{"description":"Redirect to frontend with token"}}}},"/auth/microsoft":{"get":{"summary":"Initiate Microsoft SSO login","tags":["Authentication"],"responses":{"302":{"description":"Redirect to Microsoft login"}}}},"/auth/microsoft/callback":{"get":{"summary":"Microsoft SSO callback","tags":["Authentication"],"responses":{"302":{"description":"Redirect to frontend with token"}}}},"/auth/password-reset":{"post":{"summary":"Request password reset","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"type":"string","format":"email"}}}}}},"responses":{"200":{"description":"Password reset email sent (if account exists)"}}}},"/auth/password-reset/confirm":{"post":{"summary":"Confirm password reset with token","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["resetToken","newPassword","confirmPassword"],"properties":{"resetToken":{"type":"string"},"newPassword":{"type":"string"},"confirmPassword":{"type":"string"}}}}}},"responses":{"200":{"description":"Password reset successful"},"400":{"description":"Invalid or expired token"}}}},"/health":{"get":{"summary":"Basic health check","tags":["Health"],"responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheck"}}}},"503":{"description":"Service is unhealthy"}}}},"/health/detailed":{"get":{"summary":"Detailed health check with all service statuses","tags":["Health"],"responses":{"200":{"description":"Detailed health information"}}}},"/health/ready":{"get":{"summary":"Readiness probe for Kubernetes","tags":["Health"],"responses":{"200":{"description":"Service is ready"},"503":{"description":"Service is not ready"}}}},"/health/live":{"get":{"summary":"Liveness probe for Kubernetes","tags":["Health"],"responses":{"200":{"description":"Service is alive"}}}},"/":{"get":{"summary":"API root endpoint","tags":["Health"],"responses":{"200":{"description":"API information"}}}},"/llm/providers":{"get":{"summary":"Get available LLM providers","tags":["LLM"],"responses":{"200":{"description":"List of available providers and their status","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"providers":{"type":"object"},"available":{"type":"array","items":{"type":"string"}},"default":{"type":"string"}}}}}}}}}}},"/llm/models":{"get":{"summary":"Get available LLM models","tags":["LLM"],"parameters":[{"in":"query","name":"provider","schema":{"type":"string"},"description":"Filter models by provider"}],"responses":{"200":{"description":"List of available models","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"models":{"type":"array"},"count":{"type":"integer"}}}}}}}}}}},"/llm/models/{modelId}":{"get":{"summary":"Get model configuration by ID","tags":["LLM"],"parameters":[{"in":"path","name":"modelId","required":true,"schema":{"type":"string"},"description":"Model ID"}],"responses":{"200":{"description":"Model configuration"},"404":{"description":"Model not found"}}}},"/llm/chat/stream":{"post":{"summary":"Stream chat completion via Server-Sent Events (SSE)","tags":["LLM"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["message"],"properties":{"message":{"type":"string"},"provider":{"type":"string"},"model":{"type":"string"},"systemPrompt":{"type":"string"},"temperature":{"type":"number"},"maxTokens":{"type":"integer"}}}}}},"responses":{"200":{"description":"SSE stream of chat completion","content":{"text/event-stream":{"schema":{"type":"string","description":"SSE events:\n- connected: Initial connection established\n- start: Stream starting with model info\n- content: Content chunk\n- done: Stream complete with finish reason\n- end: Connection closing\n- error: Error occurred\n"}}}}}}},"/llm/embeddings":{"post":{"summary":"Generate text embeddings","tags":["LLM"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["input"],"properties":{"model":{"type":"string","default":"text-embedding-3-large"},"input":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}}}}}},"responses":{"200":{"description":"Embeddings response"},"400":{"description":"Bad request"}}}},"/skills":{"get":{"summary":"Get all skills","description":"Retrieve a paginated list of all skills.\nSupports search filtering and sorting.\n","tags":["Skills"],"parameters":[{"in":"query","name":"search","schema":{"type":"string"},"description":"Search term to filter skills by name or description","example":"code review"},{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":500,"default":50},"description":"Number of results per page (max 500)"},{"in":"query","name":"sort_by","schema":{"type":"string","enum":["name","created_date","updated_date","version"],"default":"name"},"description":"Field to sort by"},{"in":"query","name":"sort_order","schema":{"type":"string","enum":["ASC","DESC"],"default":"ASC"},"description":"Sort direction"}],"responses":{"200":{"description":"List of skills","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsListResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}}}},"post":{"summary":"Create a new skill","description":"Create a new skill. Requires authentication.\nThe created_by field will be set to the authenticated user.\n","tags":["Skills"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillInput"}}}},"responses":{"201":{"description":"Skill created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillCreateResponse"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}}}}},"/skills/{id}":{"get":{"summary":"Get a skill by ID","description":"Retrieve a single skill by its UUID.","tags":["Skills"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Skill UUID","example":"550e8400-e29b-41d4-a716-446655440000"}],"responses":{"200":{"description":"Skill details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillResponse"}}}},"400":{"description":"Invalid UUID format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"404":{"description":"Skill not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}}}},"put":{"summary":"Update a skill","description":"Update an existing skill. Requires authentication and admin role.\nOnly provided fields will be updated. Version is automatically incremented.\n","tags":["Skills"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Skill UUID","example":"550e8400-e29b-41d4-a716-446655440000"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillUpdateInput"}}}},"responses":{"200":{"description":"Skill updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillCreateResponse"}}}},"400":{"description":"Validation error or invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"403":{"description":"Admin role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"404":{"description":"Skill not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}}}},"delete":{"summary":"Delete a skill","description":"Delete a skill. Requires authentication and admin role.\nThis action is permanent and cannot be undone.\n","tags":["Skills"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"Skill UUID","example":"550e8400-e29b-41d4-a716-446655440000"}],"responses":{"200":{"description":"Skill deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillDeleteResponse"}}}},"400":{"description":"Invalid UUID format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"403":{"description":"Admin role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}},"404":{"description":"Skill not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillsErrorResponse"}}}}}}},"/tools/webScrape":{"post":{"summary":"Scrape content from a URL","description":"Fetches and extracts content from web pages, PDFs, and DOCX files. Features adaptive throttling, retry logic, and graceful error handling.","tags":["Tools"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["url"],"properties":{"url":{"type":"string","description":"The URL to scrape","example":"https://example.com/page"},"returnHtml":{"type":"boolean","description":"If true, returns raw HTML instead of extracted text","default":false},"maxCharacters":{"type":"integer","description":"Maximum characters to return (0 or null for no limit)","example":50000}}}}}},"responses":{"200":{"description":"Successfully scraped content","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"url":{"type":"string"},"title":{"type":"string"},"content":{"type":"string"},"contentLength":{"type":"integer"},"accessedAt":{"type":"string","format":"date-time"},"truncated":{"type":"boolean"},"originalLength":{"type":"integer"},"isPdf":{"type":"boolean"},"isDocx":{"type":"boolean"},"pageCount":{"type":"integer"}}}}}},"400":{"description":"Bad request - URL is required"},"401":{"description":"Unauthorized - Authentication required"},"502":{"description":"Failed to fetch the URL"}}}},"/tools/braveSearch":{"post":{"summary":"Perform a web search using Brave Search API","description":"Searches the web using Brave Search API and returns results. Supports pagination for fetching multiple pages of results (up to 200 total). Returns graceful error if API key is not configured.","tags":["Tools"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["query"],"properties":{"query":{"type":"string","description":"The search query","example":"climate change solutions"},"numResults":{"type":"integer","description":"Number of results to return (max 200)","default":20,"example":20},"apiKey":{"type":"string","description":"Optional Brave API key (overrides server-configured key)"}}}}}},"responses":{"200":{"description":"Successfully performed search","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"query":{"type":"string"},"resultsCount":{"type":"integer"},"results":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"url":{"type":"string"},"description":{"type":"string"}}}}}}}}},"400":{"description":"Bad request - Query is required"},"401":{"description":"Unauthorized - Invalid API key"},"429":{"description":"Rate limit exceeded"},"503":{"description":"Brave API key not configured"}}}},"/tools/textToSpeech":{"post":{"summary":"Convert text to speech using ElevenLabs API","description":"Generates audio from text using ElevenLabs text-to-speech API. Returns base64-encoded audio content. Supports multiple voices and models. Returns graceful error if API key is not configured.","tags":["Tools"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["text"],"properties":{"text":{"type":"string","description":"The text to convert to speech","example":"Hello, this is a test of text to speech."},"voice_id":{"type":"string","description":"ElevenLabs voice ID to use","default":"JBFqnCBsd6RMkjVDRZzb","example":"JBFqnCBsd6RMkjVDRZzb"},"model_id":{"type":"string","description":"ElevenLabs model ID to use","default":"eleven_multilingual_v2","example":"eleven_multilingual_v2"},"apiKey":{"type":"string","description":"Optional ElevenLabs API key (overrides server-configured key)"}}}}}},"responses":{"200":{"description":"Successfully generated audio","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"audioContent":{"type":"string","description":"Base64-encoded audio content"},"mimeType":{"type":"string","example":"audio/mpeg"},"voiceId":{"type":"string","description":"Voice ID used for generation"},"modelId":{"type":"string","description":"Model ID used for generation"},"textLength":{"type":"integer","description":"Length of input text in characters"}}}}}},"400":{"description":"Bad request - Text is required"},"401":{"description":"Unauthorized - Invalid API key"},"402":{"description":"Payment required - Quota exceeded"},"429":{"description":"Rate limit exceeded"},"503":{"description":"ElevenLabs API key not configured"}}}},"/tools/textToSpeech/stream":{"post":{"summary":"Stream text to speech audio using ElevenLabs API","description":"Generates and streams audio from text using ElevenLabs text-to-speech API. Returns a chunked audio stream directly. Ideal for real-time playback of longer texts. Uses the ElevenLabs SDK for efficient streaming. Returns graceful error if API key is not configured.","tags":["Tools"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["text"],"properties":{"text":{"type":"string","description":"The text to convert to speech","example":"Hello, this is a test of streaming text to speech."},"voice_id":{"type":"string","description":"ElevenLabs voice ID to use","default":"JBFqnCBsd6RMkjVDRZzb","example":"JBFqnCBsd6RMkjVDRZzb"},"model_id":{"type":"string","description":"ElevenLabs model ID to use","default":"eleven_multilingual_v2","example":"eleven_multilingual_v2"},"apiKey":{"type":"string","description":"Optional ElevenLabs API key (overrides server-configured key)"},"voice_settings":{"type":"object","description":"Optional voice settings to customize output","properties":{"stability":{"type":"number","description":"Voice stability (0-1)","default":0},"similarityBoost":{"type":"number","description":"Similarity boost (0-1)","default":1},"useSpeakerBoost":{"type":"boolean","description":"Enable speaker boost","default":true},"speed":{"type":"number","description":"Speech speed multiplier","default":1}}}}}}}},"responses":{"200":{"description":"Audio stream","headers":{"Content-Type":{"schema":{"type":"string","example":"audio/mpeg"}},"Transfer-Encoding":{"schema":{"type":"string","example":"chunked"}},"X-Voice-Id":{"schema":{"type":"string","description":"Voice ID used for generation"}},"X-Model-Id":{"schema":{"type":"string","description":"Model ID used for generation"}}},"content":{"audio/mpeg":{"schema":{"type":"string","format":"binary"}}}},"400":{"description":"Bad request - Text is required"},"401":{"description":"Unauthorized - Invalid API key"},"402":{"description":"Payment required - Quota exceeded"},"429":{"description":"Rate limit exceeded"},"503":{"description":"ElevenLabs API key not configured"}}}},"/tools/apiCall":{"post":{"summary":"Make an API call (CORS proxy)","description":"Performs API calls on behalf of the browser, acting as a proxy to avoid CORS issues. Filters out browser-specific headers and passes through user-specified headers.","tags":["Tools"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["url"],"properties":{"url":{"type":"string","description":"The URL to call","example":"https://api.example.com/data"},"method":{"type":"string","description":"HTTP method to use","enum":["GET","POST","PUT","PATCH","DELETE"],"default":"GET"},"headers":{"type":"object","description":"Custom headers to include in the request","example":{"Authorization":"Bearer token123"}},"body":{"type":"object","description":"Request body for POST/PUT/PATCH requests"}}}}}},"responses":{"200":{"description":"Successfully made API call","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code from the target API","example":200},"statusText":{"type":"string","description":"HTTP status text from the target API","example":"OK"},"data":{"description":"Response data from the target API (JSON or text)"}}}}}},"400":{"description":"Bad request - URL is required"},"401":{"description":"Unauthorized - Authentication required"},"500":{"description":"Error making API call"}}}},"/users/profile":{"get":{"summary":"Get current user's profile","description":"Returns the authenticated user's complete profile information.","tags":["Profile"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"user":{"$ref":"#/components/schemas/UserProfile"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}},"put":{"summary":"Update current user's profile","description":"Update the authenticated user's profile information.\nOnly provided fields will be updated.\n","tags":["Profile"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"},"examples":{"updateName":{"summary":"Update display name","value":{"display_name":"Jane Doe"}},"updateAll":{"summary":"Update all fields","value":{"display_name":"Jane Doe","avatar_url":"https://example.com/avatar.jpg","language_preference":"fr"}}}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Profile updated successfully"},"user":{"$ref":"#/components/schemas/UserProfile"}}}}}},"400":{"$ref":"#/components/responses/ValidationError"},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/users/password":{"put":{"summary":"Change current user's password","description":"Change the authenticated user's password.\nRequires current password verification.\nNot available for OAuth-only accounts.\n","tags":["Profile"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"},"example":{"currentPassword":"OldPassword123!","newPassword":"NewPassword456!","confirmPassword":"NewPassword456!"}}}},"responses":{"200":{"description":"Password changed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"},"example":{"success":true,"message":"Password changed successfully"}}}},"400":{"description":"Validation error or OAuth-only account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"examples":{"mismatch":{"summary":"Passwords don't match","value":{"success":false,"error":"New passwords do not match"}},"tooShort":{"summary":"Password too short","value":{"success":false,"error":"Password must be at least 8 characters"}},"oauthOnly":{"summary":"OAuth account","value":{"success":false,"error":"Cannot change password for OAuth-only accounts"}}}}}},"401":{"description":"Current password is incorrect","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Current password is incorrect"}}}}}}},"/users/me":{"delete":{"summary":"Delete own account","description":"Permanently delete the authenticated user's own account.\n\n**Restrictions:**\n- Superadmin accounts cannot be self-deleted for security reasons\n- This action is irreversible\n","tags":["Profile"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Account deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"},"example":{"success":true,"message":"Account deleted successfully"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Superadmin accounts cannot be self-deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Superadmin accounts cannot be self-deleted. Contact another superadmin."}}}}}}},"/users":{"get":{"summary":"List all users","description":"Get a paginated list of all users.\n\n**Access Control:**\n- Admins can only see users with roles lower than their own\n- Superadmins can see all users\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Items per page"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search by email or display name (case-insensitive)"},{"in":"query","name":"role","schema":{"type":"string","enum":["superadmin","admin","user"]},"description":"Filter by role"},{"in":"query","name":"blocked","schema":{"type":"string","enum":["true","false"]},"description":"Filter by blocked status"},{"in":"query","name":"sortBy","schema":{"type":"string","enum":["created_at","email","display_name","role","last_login"],"default":"created_at"},"description":"Sort field"},{"in":"query","name":"sortOrder","schema":{"type":"string","enum":["asc","desc"],"default":"desc"},"description":"Sort direction"}],"responses":{"200":{"description":"List of users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"}}},"post":{"summary":"Create a new user","description":"Create a new user account (admin only).\n\n**Role Hierarchy:**\n- Admins can only create users with role 'user'\n- Superadmins can create users with role 'admin' or 'user'\n- Cannot create users with equal or higher role than your own\n\n**Password:**\n- If password is not provided, a secure random password is generated\n- The temporary password is returned in the response (shown only once)\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequest"},"examples":{"minimal":{"summary":"Minimal (auto-generated password)","value":{"email":"newuser@example.com","display_name":"New User"}},"complete":{"summary":"Complete with all options","value":{"email":"admin@example.com","display_name":"Admin User","password":"TempPass123!","role":"admin","language_preference":"en","email_verified":true}}}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserResponse"}}}},"400":{"$ref":"#/components/responses/ValidationError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Cannot create user with equal or higher role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Cannot create user with equal or higher role than your own"}}}},"409":{"$ref":"#/components/responses/ConflictError"}}}},"/users/{id}":{"get":{"summary":"Get a specific user","description":"Get detailed information about a specific user.\n\n**Access Control:**\n- Users can view their own profile\n- Admins can view users with lower roles\n- Superadmins can view any user\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"responses":{"200":{"description":"User details","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"user":{"$ref":"#/components/schemas/UserProfile"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}},"put":{"summary":"Update a user","description":"Update a user's profile information (admin only).\n\n**Access Control:**\n- Cannot update your own profile via this endpoint (use PUT /users/profile)\n- Cannot update users with equal or higher role\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminUpdateUserRequest"},"example":{"display_name":"Updated Name","email_verified":true}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User updated successfully"},"user":{"$ref":"#/components/schemas/UserProfile"}}}}}},"400":{"$ref":"#/components/responses/ValidationError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Cannot modify user with equal or higher role"},"404":{"$ref":"#/components/responses/NotFoundError"}}},"delete":{"summary":"Delete a user","description":"Permanently delete a user account (admin only).\n\n**Restrictions:**\n- Cannot delete yourself (use DELETE /users/me)\n- Cannot delete users with equal or higher role\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"},"example":{"success":true,"message":"User deleted successfully"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Cannot delete user with equal or higher role or yourself"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/role":{"put":{"summary":"Update a user's role","description":"Update a user's primary role and/or additional roles.\n\n**Role Hierarchy:**\n- superadmin (100) > admin (50) > user (10)\n- Cannot modify your own role\n- Cannot assign role equal to or higher than your own\n- Cannot modify users with equal or higher role\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleRequest"},"examples":{"promoteToAdmin":{"summary":"Promote to admin","value":{"role":"admin"}},"addCustomRoles":{"summary":"Add custom roles","value":{"additional_roles":["moderator","reviewer"]}}}}}},"responses":{"200":{"description":"Role updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User role updated successfully"},"user":{"$ref":"#/components/schemas/UserProfile"}}}}}},"400":{"$ref":"#/components/responses/ValidationError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Cannot assign role equal to or higher than your own"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/block":{"post":{"summary":"Block a user","description":"Block a user account, preventing them from logging in.\n\n**Restrictions:**\n- Cannot block yourself\n- Cannot block users with equal or higher role\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockUserRequest"},"example":{"reason":"Violation of terms of service"}}}},"responses":{"200":{"description":"User blocked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"},"example":{"success":true,"message":"User blocked successfully"}}}},"400":{"description":"User is already blocked"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Cannot block user with equal or higher role"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/unblock":{"post":{"summary":"Unblock a user","description":"Unblock a previously blocked user account.\nClears the blocked status, reason, and timestamp.\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"responses":{"200":{"description":"User unblocked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"},"example":{"success":true,"message":"User unblocked successfully"}}}},"400":{"description":"User is not blocked"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/audit":{"get":{"summary":"Get audit log for a user","description":"Get the audit log showing all actions performed on or by a user.\n\n**Access Control:**\n- Users can view their own audit log\n- Admins can view audit logs for users with lower roles\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":200,"default":50},"description":"Maximum number of entries to return"}],"responses":{"200":{"description":"User audit log","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLogResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/reset-token":{"post":{"summary":"Generate password reset token","description":"Generate a password reset token for a user (admin only).\nThe token can be shared with the user to reset their password.\n\n**Token Details:**\n- Valid for 24 hours\n- Token is shown only once in response\n- A reset URL is also provided\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"responses":{"200":{"description":"Reset token generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetTokenResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/{id}/reset-password":{"post":{"summary":"Reset user's password","description":"Directly reset a user's password (admin only).\nReturns the new password for the admin to share securely with the user.\n\n**Options:**\n- Provide a specific password in the request body\n- Or leave empty to auto-generate a secure random password\n","tags":["Admin - Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string","format":"uuid"},"description":"User ID"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"},"examples":{"autoGenerate":{"summary":"Auto-generate password","value":{}},"specific":{"summary":"Set specific password","value":{"password":"NewTempPass123!"}}}}}},"responses":{"200":{"description":"Password reset successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordResponse"}}}},"400":{"description":"Password too short (if provided)"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/users/admin/password-resets":{"get":{"summary":"List pending password reset requests","description":"Get a list of all pending password reset requests (admin only).\nUseful for monitoring and managing password reset activity.\n","tags":["Admin - Password Resets"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of pending password reset requests","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"resets":{"type":"array","items":{"$ref":"#/components/schemas/PasswordResetRequest"}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"}}}}}}