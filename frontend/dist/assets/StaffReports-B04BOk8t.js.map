{"version":3,"file":"StaffReports-B04BOk8t.js","sources":["../../src/views/StaffReports.vue"],"sourcesContent":["<template>\n  <div class=\"staff-reports\">\n    <header class=\"page-header\">\n      <h1>Reports</h1>\n      <p>Generate and export application processing reports</p>\n    </header>\n\n    <!-- Report Filters -->\n    <div class=\"report-filters\">\n      <div class=\"filter-row\">\n        <goa-form-item label=\"Start Date\">\n          <goa-input name=\"start_date\" type=\"date\" :value=\"filters.start_date\" @_change=\"(e) => filters.start_date = e.detail.value\" width=\"180px\"></goa-input>\n        </goa-form-item>\n        <goa-form-item label=\"End Date\">\n          <goa-input name=\"end_date\" type=\"date\" :value=\"filters.end_date\" @_change=\"(e) => filters.end_date = e.detail.value\" width=\"180px\"></goa-input>\n        </goa-form-item>\n        <goa-form-item label=\"Status\">\n          <goa-dropdown name=\"status\" :value=\"filters.status\" @_change=\"(e) => filters.status = e.detail.value\">\n            <goa-dropdown-item value=\"\" label=\"All Statuses\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Submitted\" label=\"Submitted\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Under Review\" label=\"Under Review\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Missing Info\" label=\"Missing Info\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Approved\" label=\"Approved\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Rejected\" label=\"Rejected\"></goa-dropdown-item>\n            <goa-dropdown-item value=\"Paid\" label=\"Paid\"></goa-dropdown-item>\n          </goa-dropdown>\n        </goa-form-item>\n      </div>\n      <div class=\"filter-actions\">\n        <goa-button type=\"primary\" @_click=\"generateReport\" :disabled=\"loading\">Generate Report</goa-button>\n        <goa-button v-if=\"report\" type=\"secondary\" @_click=\"exportCSV\">Export CSV</goa-button>\n      </div>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">\n      <goa-circular-progress size=\"large\"></goa-circular-progress>\n    </div>\n\n    <goa-callout v-if=\"error\" type=\"emergency\" heading=\"Report Error\">\n      {{ error }}\n    </goa-callout>\n\n    <div v-if=\"report\">\n      <!-- Metrics Summary -->\n      <div class=\"metrics-cards\">\n        <div class=\"metric-card\">\n          <h3>Total</h3>\n          <p class=\"metric-value\">{{ report.metrics.total }}</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Approved</h3>\n          <p class=\"metric-value success\">{{ report.metrics.approved }}</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Rejected</h3>\n          <p class=\"metric-value danger\">{{ report.metrics.rejected }}</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Missing Info</h3>\n          <p class=\"metric-value warning\">{{ report.metrics.missingInfo }}</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Approval Rate</h3>\n          <p class=\"metric-value\">{{ report.metrics.approvalRate }}%</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>MI Rate</h3>\n          <p class=\"metric-value\">{{ report.metrics.miRate }}%</p>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Avg. Turnaround</h3>\n          <p class=\"metric-value\">{{ report.metrics.avgTurnaround }} days</p>\n        </div>\n      </div>\n\n      <!-- Data Table -->\n      <div class=\"report-table-wrap\">\n        <table class=\"report-table\">\n          <thead>\n            <tr>\n              <th>Ref #</th>\n              <th>Applicant</th>\n              <th>Email</th>\n              <th>Scholarship</th>\n              <th>Status</th>\n              <th>Submitted</th>\n              <th>Decision</th>\n              <th>Days</th>\n              <th>Reviewer</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"row in report.data\" :key=\"row.id\">\n              <td class=\"ref-cell\">{{ row.reference_number }}</td>\n              <td>{{ row.first_name }} {{ row.last_name }}</td>\n              <td>{{ row.applicant_email }}</td>\n              <td class=\"scholarship-cell\">{{ row.scholarship_name }}</td>\n              <td><span class=\"status-badge\" :class=\"row.status.toLowerCase().replace(/\\s+/g, '-')\">{{ row.status }}</span></td>\n              <td>{{ formatDate(row.submitted_at) }}</td>\n              <td>{{ row.decision || '-' }}</td>\n              <td>{{ row.processing_days || '-' }}</td>\n              <td>{{ row.reviewer_name || '-' }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <p class=\"record-count\">{{ report.data.length }} records</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport { staffAPI } from '@/services/staffService';\n\nconst loading = ref(false);\nconst report = ref(null);\nconst error = ref(null);\nconst filters = reactive({ start_date: '', end_date: '', status: '' });\n\nasync function generateReport() {\n  loading.value = true;\n  error.value = null;\n  try {\n    const params = {};\n    if (filters.start_date) params.start_date = filters.start_date;\n    if (filters.end_date) params.end_date = filters.end_date;\n    if (filters.status) params.status = filters.status;\n    report.value = await staffAPI.getReport(params);\n  } catch (err) {\n    console.error('Failed to generate report:', err);\n    error.value = err.response?.data?.message || err.message || 'Failed to generate report';\n  } finally {\n    loading.value = false;\n  }\n}\n\n// Auto-load report on mount\nonMounted(() => generateReport());\n\nfunction formatDate(d) {\n  if (!d) return '-';\n  return new Date(d).toLocaleDateString('en-CA', { year: 'numeric', month: 'short', day: 'numeric' });\n}\n\nfunction exportCSV() {\n  if (!report.value?.data) return;\n  const headers = ['Reference', 'First Name', 'Last Name', 'Email', 'Scholarship', 'Status', 'Submitted', 'Decision', 'Processing Days', 'Reviewer'];\n  const rows = report.value.data.map(r => [\n    r.reference_number, r.first_name, r.last_name, r.applicant_email,\n    r.scholarship_name, r.status, r.submitted_at?.substring(0, 10) || '',\n    r.decision || '', r.processing_days || '', r.reviewer_name || ''\n  ]);\n\n  const csv = [headers.join(','), ...rows.map(r => r.map(v => `\"${(v || '').toString().replace(/\"/g, '\"\"')}\"`).join(','))].join('\\n');\n  const blob = new Blob([csv], { type: 'text/csv' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `report-${new Date().toISOString().substring(0, 10)}.csv`;\n  a.click();\n  URL.revokeObjectURL(url);\n}\n</script>\n\n<style scoped>\n.staff-reports { max-width: 1400px; margin: 0 auto; }\n.page-header { margin-bottom: var(--goa-space-l); }\n.page-header h1 { font-size: var(--goa-font-size-7); font-weight: var(--goa-font-weight-bold); margin-bottom: var(--goa-space-2xs); }\n.page-header p { color: var(--goa-color-text-secondary); }\n\n.report-filters { margin-bottom: var(--goa-space-xl); padding: var(--goa-space-l); background: var(--goa-color-greyscale-white); border: 1px solid var(--goa-color-greyscale-200); border-radius: var(--goa-border-radius-m); }\n.filter-row { display: flex; gap: var(--goa-space-m); flex-wrap: wrap; margin-bottom: var(--goa-space-m); }\n.filter-actions { display: flex; gap: var(--goa-space-m); }\n\n.metrics-cards { display: grid; grid-template-columns: repeat(7, 1fr); gap: var(--goa-space-m); margin-bottom: var(--goa-space-xl); }\n.metric-card { padding: var(--goa-space-m); background: var(--goa-color-greyscale-white); border: 1px solid var(--goa-color-greyscale-200); border-radius: var(--goa-border-radius-m); text-align: center; }\n.metric-card h3 { font-size: var(--goa-font-size-1); color: var(--goa-color-text-secondary); margin-bottom: var(--goa-space-2xs); }\n.metric-value { font-size: var(--goa-font-size-5); font-weight: var(--goa-font-weight-bold); color: var(--goa-color-interactive-default); }\n.metric-value.success { color: #137333; }\n.metric-value.danger { color: #c5221f; }\n.metric-value.warning { color: #b06000; }\n\n.report-table-wrap { overflow-x: auto; }\n.report-table { width: 100%; border-collapse: collapse; font-size: var(--goa-font-size-2); }\n.report-table th, .report-table td { padding: var(--goa-space-s); text-align: left; border-bottom: 1px solid var(--goa-color-greyscale-200); }\n.report-table th { font-weight: var(--goa-font-weight-bold); background: var(--goa-color-greyscale-100); }\n.ref-cell { font-family: monospace; font-size: var(--goa-font-size-1); }\n.scholarship-cell { max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n.record-count { color: var(--goa-color-text-secondary); font-size: var(--goa-font-size-2); margin-top: var(--goa-space-s); }\n\n.status-badge { padding: 2px 8px; border-radius: 4px; font-size: var(--goa-font-size-1); font-weight: var(--goa-font-weight-bold); }\n.status-badge.submitted { background: #fef7e0; color: #b06000; }\n.status-badge.under-review { background: #e8f0fe; color: #1a73e8; }\n.status-badge.missing-info { background: #fef7e0; color: #b06000; }\n.status-badge.approved { background: #e6f4ea; color: #137333; }\n.status-badge.rejected { background: #fce8e6; color: #c5221f; }\n.status-badge.paid { background: #e6f4ea; color: #137333; }\n\n.loading { display: flex; justify-content: center; padding: var(--goa-space-xl); }\n\n@media (max-width: 1024px) {\n  .metrics-cards { grid-template-columns: repeat(3, 1fr); }\n}\n</style>\n"],"names":["loading","ref","report","error","filters","reactive","generateReport","params","staffAPI","err","_b","_a","onMounted","formatDate","d","exportCSV","headers","rows","r","csv","v","blob","url","a","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_cache","e","_hoisted_6","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_Fragment","_renderList","row","_hoisted_32","_hoisted_33","_normalizeClass","_hoisted_34"],"mappings":"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"}