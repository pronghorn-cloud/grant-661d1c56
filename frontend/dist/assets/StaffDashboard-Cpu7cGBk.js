import{s as R}from"./staffService-ohwfNNCE.js";import{_ as W,e as B,o,c as n,a as s,t as l,F as c,f as _,r as p,q as F}from"./index-DDxpmVXJ.js";const N={class:"staff-dashboard"},T={key:0,class:"loading"},$={key:1,type:"emergency",heading:"Error loading dashboard"},q={key:2},x={class:"stat-cards"},C={class:"stat-card"},L={class:"stat-number warning"},M={class:"stat-card"},V={class:"stat-number"},j={class:"stat-card"},z={class:"stat-number"},E={class:"stat-card"},P={class:"stat-number warning"},U={class:"stat-card"},G={class:"stat-number success"},Q={class:"stat-card"},H={class:"stat-number danger"},J={class:"stat-card"},K={class:"stat-number"},O={class:"stat-card"},X={class:"stat-number"},Y={class:"dashboard-grid"},Z={class:"dashboard-section"},ss={key:0,class:"bar-chart"},ts={class:"bar-label"},as={class:"bar-container"},es={class:"bar-value"},os={key:1,class:"no-data"},ns={class:"dashboard-section"},ls={key:0,class:"workload-list"},rs={class:"staff-name"},is={class:"workload-count"},ds={key:1,class:"no-data"},us={class:"dashboard-section full-width"},cs={key:0,class:"activity-list"},_s={class:"activity-date"},ps={key:1,class:"no-data"},vs={class:"quick-actions"},hs={__name:"StaffDashboard",setup(ms){const v=p(!0),e=p({}),u=p(null);B(async()=>{var r,t;try{e.value=await R.getDashboardStats()}catch(i){console.error("Failed to load dashboard:",i),u.value=((t=(r=i.response)==null?void 0:r.data)==null?void 0:t.message)||i.message||"Failed to load dashboard data"}finally{v.value=!1}});function A(r){var i;const t=Math.max(...((i=e.value.byScholarship)==null?void 0:i.map(d=>parseInt(d.count)))||[1]);return parseInt(r)/t*100}function D(r){return(r==null?void 0:r.replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()))||r}function I(r){return r?new Date(r).toLocaleString("en-CA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(r,t)=>{var i,d,h,m,y,g,b,f,k,w,S;return o(),n("div",N,[t[14]||(t[14]=s("header",{class:"page-header"},[s("h1",null,"Staff Dashboard"),s("p",null,"Application processing overview")],-1)),v.value?(o(),n("div",T,[...t[2]||(t[2]=[s("goa-circular-progress",{size:"large"},null,-1)])])):u.value?(o(),n("goa-callout",$,l(u.value),1)):(o(),n("div",q,[s("div",x,[s("div",C,[t[3]||(t[3]=s("h3",null,"Pending Review",-1)),s("p",L,l(((i=e.value.summary)==null?void 0:i.pending_review)||0),1)]),s("div",M,[t[4]||(t[4]=s("h3",null,"Submitted",-1)),s("p",V,l(((d=e.value.summary)==null?void 0:d.submitted)||0),1)]),s("div",j,[t[5]||(t[5]=s("h3",null,"Under Review",-1)),s("p",z,l(((h=e.value.summary)==null?void 0:h.under_review)||0),1)]),s("div",E,[t[6]||(t[6]=s("h3",null,"Missing Info",-1)),s("p",P,l(((m=e.value.summary)==null?void 0:m.missing_info)||0),1)]),s("div",U,[t[7]||(t[7]=s("h3",null,"Approved",-1)),s("p",G,l(((y=e.value.summary)==null?void 0:y.approved)||0),1)]),s("div",Q,[t[8]||(t[8]=s("h3",null,"Rejected",-1)),s("p",H,l(((g=e.value.summary)==null?void 0:g.rejected)||0),1)]),s("div",J,[t[9]||(t[9]=s("h3",null,"Avg. Turnaround",-1)),s("p",K,l(((b=e.value.summary)==null?void 0:b.avg_turnaround_days)||0)+" days",1)]),s("div",O,[t[10]||(t[10]=s("h3",null,"Total Applications",-1)),s("p",X,l(((f=e.value.summary)==null?void 0:f.total_applications)||0),1)])]),s("div",Y,[s("section",Z,[t[11]||(t[11]=s("h2",null,"Volume by Scholarship (Top 10)",-1)),((k=e.value.byScholarship)==null?void 0:k.length)>0?(o(),n("div",ss,[(o(!0),n(c,null,_(e.value.byScholarship,a=>(o(),n("div",{key:a.name,class:"bar-row"},[s("span",ts,l(a.name),1),s("div",as,[s("div",{class:"bar-fill",style:F({width:A(a.count)+"%"})},null,4),s("span",es,l(a.count),1)])]))),128))])):(o(),n("p",os,"No application data yet."))]),s("section",ns,[t[12]||(t[12]=s("h2",null,"Staff Workload",-1)),((w=e.value.staffWorkload)==null?void 0:w.length)>0?(o(),n("div",ls,[(o(!0),n(c,null,_(e.value.staffWorkload,a=>(o(),n("div",{key:a.email,class:"workload-item"},[s("span",rs,l(a.display_name||a.email),1),s("span",is,l(a.assigned_count)+" assigned",1)]))),128))])):(o(),n("p",ds,"No applications assigned yet."))]),s("section",us,[t[13]||(t[13]=s("h2",null,"Recent Activity",-1)),((S=e.value.recentActivity)==null?void 0:S.length)>0?(o(),n("div",cs,[(o(!0),n(c,null,_(e.value.recentActivity,a=>(o(),n("div",{key:a.id||a.created_at,class:"activity-item"},[s("strong",null,l(D(a.action)),1),s("span",null,"by "+l(a.staff_name||"System"),1),s("span",_s,l(I(a.created_at)),1)]))),128))])):(o(),n("p",ps,"No recent activity."))])]),s("div",vs,[s("goa-button",{type:"primary",on_click:t[0]||(t[0]=a=>r.$router.push("/staff/queue"))},"View Work Queue",32),s("goa-button",{type:"secondary",on_click:t[1]||(t[1]=a=>r.$router.push("/staff/reports"))},"Generate Reports",32)])]))])}}},bs=W(hs,[["__scopeId","data-v-c4ece1d2"]]);export{bs as default};
//# sourceMappingURL=StaffDashboard-Cpu7cGBk.js.map
