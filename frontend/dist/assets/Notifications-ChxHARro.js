import{j as u,_ as M,e as q,o as n,c as o,a as s,d as m,F as N,f as $,r as p,u as D,n as v,t as r}from"./index-DDxpmVXJ.js";const _={getAll:(c={})=>u.get("/notifications",{params:c}),getUnreadCount:()=>u.get("/notifications/unread-count"),markAsRead:c=>u.put(`/notifications/${c}/read`),markAllAsRead:()=>u.put("/notifications/read-all")},F={class:"notifications-page"},x={class:"page-header"},I={key:0,class:"loading"},z={key:1,class:"empty-state"},B={key:2,class:"notification-list"},E=["onClick"],L={class:"notif-content"},P={class:"notif-header"},U={class:"notif-time"},V={class:"notif-message"},j={key:0,class:"notif-type"},H={key:0,class:"unread-dot"},J={__name:"Notifications",setup(c){const k=D(),g=p(!0),l=p([]),i=p(0);q(async()=>{try{const[e,t]=await Promise.all([_.getAll(),_.getUnreadCount()]);l.value=e,i.value=t.count}catch(e){console.error("Failed to load notifications:",e)}finally{g.value=!1}});function w(e){if(!e)return"";const t=new Date(e),d=new Date-t,f=Math.floor(d/6e4),y=Math.floor(d/36e5),h=Math.floor(d/864e5);return f<1?"Just now":f<60?`${f}m ago`:y<24?`${y}h ago`:h<7?`${h}d ago`:t.toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric"})}function A(e){return{submitted:"✓",action_required:"!",decision_available:"★",mi_request:"?",payment_processed:"$",cor_request:"✉",deadline_reminder:"⏰"}[e]||"●"}function C(e){return{submitted:"icon-success",action_required:"icon-warning",decision_available:"icon-info",mi_request:"icon-warning",payment_processed:"icon-success",cor_request:"icon-info",deadline_reminder:"icon-warning"}[e]||"icon-info"}async function R(e){if(!e.read)try{await _.markAsRead(e.id),e.read=!0,i.value=Math.max(0,i.value-1)}catch(t){console.error("Failed to mark as read:",t)}e.application_id&&k.push("/dashboard")}async function b(){try{await _.markAllAsRead(),l.value.forEach(e=>e.read=!0),i.value=0}catch(e){console.error("Failed to mark all as read:",e)}}return(e,t)=>(n(),o("div",F,[s("header",x,[t[0]||(t[0]=s("h1",null,"Notifications",-1)),i.value>0?(n(),o("goa-button",{key:0,type:"tertiary",size:"compact",on_click:b}," Mark All as Read ",32)):m("",!0)]),g.value?(n(),o("div",I,[...t[1]||(t[1]=[s("goa-circular-progress",{size:"large"},null,-1)])])):l.value.length===0?(n(),o("div",z,[...t[2]||(t[2]=[s("p",null,"No notifications yet.",-1),s("p",null,"You'll receive notifications when your application status changes.",-1)])])):(n(),o("div",B,[(n(!0),o(N,null,$(l.value,a=>(n(),o("div",{key:a.id,class:v(["notification-item",{unread:!a.read}]),onClick:d=>R(a)},[s("div",{class:v(["notif-icon",C(a.type)])},[s("span",null,r(A(a.type)),1)],2),s("div",L,[s("div",P,[s("strong",null,r(a.title),1),s("span",U,r(w(a.sent_at)),1)]),s("p",V,r(a.message),1),a.type_label?(n(),o("span",j,r(a.type_label),1)):m("",!0)]),a.read?m("",!0):(n(),o("div",H))],10,E))),128))]))]))}},T=M(J,[["__scopeId","data-v-cdf53a89"]]);export{T as default};
//# sourceMappingURL=Notifications-ChxHARro.js.map
