import{_ as T,e as Y,o as a,c as l,a as e,t as i,F as x,f as D,d as _,m as M,h as u,i as V,r as v,p as H,u as U,n as J}from"./index-DDxpmVXJ.js";import{a as h}from"./applicationService-COv8CUWQ.js";const K={class:"application-form"},Q={key:0,class:"loading"},X={key:1,class:"error-state"},W=["heading"],Z={key:2},ee={class:"page-header"},oe={class:"back-nav"},te={class:"step-progress"},se=["onClick"],ie={class:"step-number"},ne={class:"step-label"},ae={key:0,type:"success"},le={key:1,type:"emergency"},re={key:2,class:"form-step"},de={class:"form-grid"},ue={class:"form-field"},_e={label:"First Name",requirement:"required"},ce=["value"],pe={class:"form-field"},ve={label:"Last Name",requirement:"required"},fe=["value"],me={class:"form-field"},ge={label:"Email"},he=["value"],ye={class:"form-field"},be={label:"Phone",requirement:"required"},we=["value"],ke={class:"form-field"},Se={label:"Date of Birth"},Ne=["value"],Pe={class:"form-field full-width"},xe={label:"Address"},De=["value"],Ae={key:3,class:"form-step"},Ie={class:"form-grid"},Fe={class:"form-field"},Ee={label:"Institution Name",requirement:"required"},Be=["value"],Re={class:"form-field"},qe={label:"Program",requirement:"required"},$e=["value"],je={class:"form-field"},Ce={label:"Enrollment Status"},ze=["value"],Ge={class:"form-field"},Le={label:"Year of Study"},Oe=["value"],Te={class:"form-field"},Ye={label:"Expected Graduation"},Me=["value"],Ve={class:"form-grid"},He={class:"form-field"},Ue={label:"High School Name"},Je=["value"],Ke={class:"form-field"},Qe={label:"Graduation Year"},Xe=["value"],We={key:4,class:"form-step"},Ze={class:"form-grid"},eo={class:"form-field full-width"},oo={label:"Essay / Personal Statement",helptext:"Describe your goals, achievements, and why you should receive this scholarship."},to=["value"],so={class:"form-field full-width"},io={label:"Extracurricular Activities"},no=["value"],ao={class:"form-field full-width"},lo={label:"Previous Awards / Achievements"},ro=["value"],uo={key:5,class:"form-step"},_o={class:"upload-area"},co={class:"upload-controls"},po=["value"],vo=["disabled"],fo={key:0,class:"document-list"},mo={class:"doc-info"},go={class:"doc-meta"},ho=["on_click"],yo={key:1,class:"no-docs"},bo={key:6,class:"form-step"},wo={class:"review-section"},ko={class:"review-grid"},So={class:"review-item"},No={class:"review-item"},Po={class:"review-item"},xo={class:"review-item"},Do={class:"review-item full-width"},Ao={class:"review-section"},Io={class:"review-grid"},Fo={class:"review-item"},Eo={class:"review-item"},Bo={class:"review-item"},Ro={class:"review-item"},qo={class:"review-section"},$o={class:"review-grid"},jo={class:"review-item"},Co={class:"review-item"},zo={class:"review-item"},Go={class:"review-item"},Lo={class:"review-item"},Oo={key:0,class:"review-section"},To={class:"review-grid"},Yo={class:"review-item"},Mo={class:"review-item"},Vo={key:1,class:"review-section"},Ho={class:"review-essay"},Uo={key:2,class:"review-section"},Jo={key:0,class:"review-sub"},Ko={class:"review-text"},Qo={key:1,class:"review-sub"},Xo={class:"review-text"},Wo={class:"review-section"},Zo={key:0},et={key:1,class:"no-docs"},ot={class:"consent-section"},tt={class:"consent-checks"},st=["checked"],it=["checked"],nt={class:"step-navigation"},at={class:"nav-right"},lt=["disabled"],rt=["disabled"],dt={key:3,class:"confirmation"},ut={type:"success",heading:"Application Submitted!"},_t={class:"confirmation-actions"},ct={__name:"ApplicationForm",setup(pt){const B=V();U();const A=v(!0),S=v(""),b=v(!1),w=v(!1),k=v(!1),I=v(!1),y=v(""),f=v(""),c=v(0),p=v(null),N=v(""),g=v([]),P=v("transcript"),R=v(null),q=["Personal Info","Education","Additional","Documents","Review & Submit"],t=H({personal_info:{first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",address_street:"",address_city:"",address_province:"",address_postal_code:""},postsecondary_info:{institution_name:"",program:"",enrollment_status:"",year_of_study:null,expected_graduation:""},high_school_info:{school_name:"",graduation_year:null},additional_info:{extracurriculars:"",awards:""},essay:"",declaration_signed:!1,privacy_consent:!1});Y(async()=>{var n,o;try{const s=B.params.id,d=await h.start(s);p.value=d.data,N.value=d.data.scholarship_name;const r=(await h.getById(p.value.id)).data;r.personal_info&&Object.assign(t.personal_info,r.personal_info),r.postsecondary_info&&typeof r.postsecondary_info=="object"&&Object.assign(t.postsecondary_info,r.postsecondary_info),r.high_school_info&&typeof r.high_school_info=="object"&&Object.assign(t.high_school_info,r.high_school_info),r.additional_info&&typeof r.additional_info=="object"&&Object.assign(t.additional_info,r.additional_info),r.essay&&(t.essay=r.essay),t.declaration_signed=r.declaration_signed||!1,t.privacy_consent=r.privacy_consent||!1,g.value=r.documents||[]}catch(s){S.value=((o=(n=s.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to load application"}finally{A.value=!1}});function F(){const n=t.personal_info;return[n.address_street,n.address_city,n.address_province,n.address_postal_code].filter(Boolean).join(", ")}function $(n){return n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB"}function j(n){n<=c&&(c.value=n)}function C(){y.value="",f.value="",c.value<4&&(E(),c.value++)}function z(){y.value="",f.value="",c.value>0&&c.value--}async function E(){var n,o;b.value=!0,y.value="",f.value="";try{await h.saveDraft(p.value.id,{personal_info:t.personal_info,postsecondary_info:t.postsecondary_info,high_school_info:t.high_school_info,additional_info:t.additional_info,essay:t.essay,declaration_signed:t.declaration_signed,privacy_consent:t.privacy_consent}),y.value="Draft saved successfully."}catch(s){f.value=((o=(n=s.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to save draft"}finally{b.value=!1}}async function G(n){var s,d;const o=n.target.files[0];if(o){k.value=!0;try{const m=new FormData;m.append("file",o),m.append("document_type",P.value);const r=await h.uploadDocument(p.value.id,m);g.value.push(r.data)}catch(m){f.value=((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload document"}finally{k.value=!1,n.target.value=""}}}async function L(n){var o,s;try{await h.removeDocument(p.value.id,n),g.value=g.value.filter(d=>d.id!==n)}catch(d){f.value=((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to remove document"}}async function O(){var n,o,s,d;w.value=!0,f.value="";try{await h.saveDraft(p.value.id,{personal_info:t.personal_info,postsecondary_info:t.postsecondary_info,high_school_info:t.high_school_info,additional_info:t.additional_info,essay:t.essay,declaration_signed:t.declaration_signed,privacy_consent:t.privacy_consent}),await h.submit(p.value.id),I.value=!0}catch(m){const r=(o=(n=m.response)==null?void 0:n.data)==null?void 0:o.errors;f.value=r?r.join(", "):((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to submit application"}finally{w.value=!1}}return(n,o)=>(a(),l("div",K,[A.value?(a(),l("div",Q,[...o[21]||(o[21]=[e("goa-circular-progress",{size:"large"},null,-1),e("p",null,"Loading application...",-1)])])):S.value?(a(),l("div",X,[e("goa-callout",{type:"emergency",heading:S.value},[e("goa-button",{type:"tertiary",on_click:o[0]||(o[0]=s=>n.$router.push("/scholarships"))},"Back to Catalog",32)],8,W)])):p.value?(a(),l("div",Z,[e("header",ee,[e("div",oe,[e("goa-button",{type:"tertiary",size:"compact",on_click:o[1]||(o[1]=s=>n.$router.push("/dashboard"))}," Back to Dashboard ",32)]),e("h1",null,i(N.value),1),e("p",null,"Reference: "+i(p.value.reference_number)+" | Status: "+i(p.value.status),1)]),e("div",te,[(a(),l(x,null,D(q,(s,d)=>e("div",{key:d,class:J(["step-item",{active:c.value===d,completed:d<c.value}]),onClick:m=>j(d)},[e("span",ie,i(d+1),1),e("span",ne,i(s),1)],10,se)),64))]),y.value?(a(),l("goa-callout",ae,[e("p",null,i(y.value),1)])):_("",!0),f.value?(a(),l("goa-callout",le,[e("p",null,i(f.value),1)])):_("",!0),c.value===0?(a(),l("section",re,[o[22]||(o[22]=e("h2",null,"Step 1: Personal Information",-1)),o[23]||(o[23]=e("p",{class:"step-description"},"Review and confirm your personal details. These were pre-filled from your profile.",-1)),e("div",de,[e("div",ue,[e("goa-form-item",_e,[e("goa-input",{name:"first_name",value:t.personal_info.first_name,on_change:o[2]||(o[2]=s=>t.personal_info.first_name=s.detail.value),width:"100%"},null,40,ce)])]),e("div",pe,[e("goa-form-item",ve,[e("goa-input",{name:"last_name",value:t.personal_info.last_name,on_change:o[3]||(o[3]=s=>t.personal_info.last_name=s.detail.value),width:"100%"},null,40,fe)])]),e("div",me,[e("goa-form-item",ge,[e("goa-input",{name:"email",value:t.personal_info.email,disabled:"true",width:"100%"},null,8,he)])]),e("div",ye,[e("goa-form-item",be,[e("goa-input",{name:"phone",value:t.personal_info.phone,on_change:o[4]||(o[4]=s=>t.personal_info.phone=s.detail.value),width:"100%"},null,40,we)])]),e("div",ke,[e("goa-form-item",Se,[e("goa-input",{name:"dob",type:"date",value:t.personal_info.date_of_birth?t.personal_info.date_of_birth.substring(0,10):"",disabled:"true",width:"100%"},null,8,Ne)])]),e("div",Pe,[e("goa-form-item",xe,[e("goa-input",{name:"address",value:F(),disabled:"true",width:"100%"},null,8,De)])])])])):_("",!0),c.value===1?(a(),l("section",Ae,[o[25]||(o[25]=e("h2",null,"Step 2: Education Information",-1)),o[26]||(o[26]=e("p",{class:"step-description"},"Provide your post-secondary and high school information.",-1)),o[27]||(o[27]=e("h3",null,"Post-Secondary Institution",-1)),e("div",Ie,[e("div",Fe,[e("goa-form-item",Ee,[e("goa-input",{name:"institution_name",value:t.postsecondary_info.institution_name,on_change:o[5]||(o[5]=s=>t.postsecondary_info.institution_name=s.detail.value),width:"100%"},null,40,Be)])]),e("div",Re,[e("goa-form-item",qe,[e("goa-input",{name:"program",value:t.postsecondary_info.program,on_change:o[6]||(o[6]=s=>t.postsecondary_info.program=s.detail.value),width:"100%"},null,40,$e)])]),e("div",je,[e("goa-form-item",Ce,[e("goa-dropdown",{name:"enrollment_status",value:t.postsecondary_info.enrollment_status,on_change:o[7]||(o[7]=s=>t.postsecondary_info.enrollment_status=s.detail.value)},[...o[24]||(o[24]=[e("goa-dropdown-item",{value:"",label:"Select"},null,-1),e("goa-dropdown-item",{value:"Full-time",label:"Full-time"},null,-1),e("goa-dropdown-item",{value:"Part-time",label:"Part-time"},null,-1)])],40,ze)])]),e("div",Ge,[e("goa-form-item",Le,[e("goa-input",{name:"year_of_study",type:"number",value:String(t.postsecondary_info.year_of_study||""),on_change:o[8]||(o[8]=s=>t.postsecondary_info.year_of_study=Number(s.detail.value)),width:"100%"},null,40,Oe)])]),e("div",Te,[e("goa-form-item",Ye,[e("goa-input",{name:"expected_grad",type:"month",value:t.postsecondary_info.expected_graduation||"",on_change:o[9]||(o[9]=s=>t.postsecondary_info.expected_graduation=s.detail.value),width:"100%"},null,40,Me)])])]),o[28]||(o[28]=e("h3",null,"High School Information",-1)),e("div",Ve,[e("div",He,[e("goa-form-item",Ue,[e("goa-input",{name:"hs_name",value:t.high_school_info.school_name,on_change:o[10]||(o[10]=s=>t.high_school_info.school_name=s.detail.value),width:"100%"},null,40,Je)])]),e("div",Ke,[e("goa-form-item",Qe,[e("goa-input",{name:"hs_grad",type:"number",value:String(t.high_school_info.graduation_year||""),on_change:o[11]||(o[11]=s=>t.high_school_info.graduation_year=Number(s.detail.value)),width:"100%"},null,40,Xe)])])])])):_("",!0),c.value===2?(a(),l("section",We,[o[29]||(o[29]=e("h2",null,"Step 3: Scholarship-Specific Information",-1)),o[30]||(o[30]=e("p",{class:"step-description"},"Provide any additional information required for this scholarship.",-1)),e("div",Ze,[e("div",eo,[e("goa-form-item",oo,[e("goa-textarea",{name:"essay",value:t.essay,on_change:o[12]||(o[12]=s=>t.essay=s.detail.value),rows:"8",width:"100%"},null,40,to)])]),e("div",so,[e("goa-form-item",io,[e("goa-textarea",{name:"extracurriculars",value:t.additional_info.extracurriculars,on_change:o[13]||(o[13]=s=>t.additional_info.extracurriculars=s.detail.value),rows:"4",width:"100%"},null,40,no)])]),e("div",ao,[e("goa-form-item",lo,[e("goa-textarea",{name:"awards",value:t.additional_info.awards,on_change:o[14]||(o[14]=s=>t.additional_info.awards=s.detail.value),rows:"3",width:"100%"},null,40,ro)])])])])):_("",!0),c.value===3?(a(),l("section",uo,[o[32]||(o[32]=e("h2",null,"Step 4: Supporting Documents",-1)),o[33]||(o[33]=e("p",{class:"step-description"},"Upload required documents (PDF, DOCX, JPG, PNG - max 10MB each).",-1)),e("div",_o,[e("div",co,[e("goa-dropdown",{name:"doc_type",value:P.value,on_change:o[15]||(o[15]=s=>P.value=s.detail.value)},[...o[31]||(o[31]=[M('<goa-dropdown-item value="transcript" label="Transcript" data-v-feb92054></goa-dropdown-item><goa-dropdown-item value="nomination_letter" label="Nomination Letter" data-v-feb92054></goa-dropdown-item><goa-dropdown-item value="reference" label="Reference Letter" data-v-feb92054></goa-dropdown-item><goa-dropdown-item value="identification" label="Identification" data-v-feb92054></goa-dropdown-item><goa-dropdown-item value="essay" label="Essay Document" data-v-feb92054></goa-dropdown-item><goa-dropdown-item value="other" label="Other" data-v-feb92054></goa-dropdown-item>',6)])],40,po),e("input",{type:"file",ref_key:"fileInput",ref:R,onChange:G,accept:".pdf,.docx,.doc,.jpg,.jpeg,.png",style:{display:"none"}},null,544),e("goa-button",{type:"secondary",size:"compact",on_click:o[16]||(o[16]=s=>n.$refs.fileInput.click()),disabled:k.value},i(k.value?"Uploading...":"Choose File"),41,vo)]),g.value.length>0?(a(),l("div",fo,[(a(!0),l(x,null,D(g.value,s=>(a(),l("div",{key:s.id,class:"document-item"},[e("div",mo,[e("strong",null,i(s.file_name),1),e("span",go,i(s.document_type)+" | "+i($(s.file_size)),1)]),e("goa-button",{type:"tertiary",size:"compact",on_click:d=>L(s.id)}," Remove ",40,ho)]))),128))])):(a(),l("p",yo,"No documents uploaded yet."))])])):_("",!0),c.value===4?(a(),l("section",bo,[o[59]||(o[59]=e("h2",null,"Step 5: Review & Submit",-1)),o[60]||(o[60]=e("p",{class:"step-description"},"Review your application before submitting.",-1)),e("div",wo,[o[39]||(o[39]=e("h3",null,"Personal Information",-1)),e("div",ko,[e("div",So,[o[34]||(o[34]=e("strong",null,"Name:",-1)),u(" "+i(t.personal_info.first_name)+" "+i(t.personal_info.last_name),1)]),e("div",No,[o[35]||(o[35]=e("strong",null,"Email:",-1)),u(" "+i(t.personal_info.email),1)]),e("div",Po,[o[36]||(o[36]=e("strong",null,"Phone:",-1)),u(" "+i(t.personal_info.phone||"Not provided"),1)]),e("div",xo,[o[37]||(o[37]=e("strong",null,"Date of Birth:",-1)),u(" "+i(t.personal_info.date_of_birth?new Date(t.personal_info.date_of_birth).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"}):"Not provided"),1)]),e("div",Do,[o[38]||(o[38]=e("strong",null,"Address:",-1)),u(" "+i(F()||"Not provided"),1)])])]),e("div",Ao,[o[44]||(o[44]=e("h3",null,"Citizenship & Residency",-1)),e("div",Io,[e("div",Fo,[o[40]||(o[40]=e("strong",null,"Citizenship Status:",-1)),u(" "+i(p.value.citizenship_status||"Not provided"),1)]),e("div",Eo,[o[41]||(o[41]=e("strong",null,"Alberta Resident:",-1)),u(" "+i(p.value.residency_status===!0?"Yes":p.value.residency_status===!1?"No":"Not provided"),1)]),e("div",Bo,[o[42]||(o[42]=e("strong",null,"Indigenous Status:",-1)),u(" "+i(p.value.indigenous_status||"Not applicable"),1)]),e("div",Ro,[o[43]||(o[43]=e("strong",null,"Gender:",-1)),u(" "+i(p.value.gender||"Not provided"),1)])])]),e("div",qo,[o[50]||(o[50]=e("h3",null,"Post-Secondary Education",-1)),e("div",$o,[e("div",jo,[o[45]||(o[45]=e("strong",null,"Institution:",-1)),u(" "+i(t.postsecondary_info.institution_name||"Not provided"),1)]),e("div",Co,[o[46]||(o[46]=e("strong",null,"Program:",-1)),u(" "+i(t.postsecondary_info.program||"Not provided"),1)]),e("div",zo,[o[47]||(o[47]=e("strong",null,"Enrollment Status:",-1)),u(" "+i(t.postsecondary_info.enrollment_status||"Not provided"),1)]),e("div",Go,[o[48]||(o[48]=e("strong",null,"Year of Study:",-1)),u(" "+i(t.postsecondary_info.year_of_study||"Not provided"),1)]),e("div",Lo,[o[49]||(o[49]=e("strong",null,"Expected Graduation:",-1)),u(" "+i(t.postsecondary_info.expected_graduation||"Not provided"),1)])])]),t.high_school_info.school_name||t.high_school_info.graduation_year?(a(),l("div",Oo,[o[53]||(o[53]=e("h3",null,"High School Information",-1)),e("div",To,[e("div",Yo,[o[51]||(o[51]=e("strong",null,"School Name:",-1)),u(" "+i(t.high_school_info.school_name||"Not provided"),1)]),e("div",Mo,[o[52]||(o[52]=e("strong",null,"Graduation Year:",-1)),u(" "+i(t.high_school_info.graduation_year||"Not provided"),1)])])])):_("",!0),t.essay?(a(),l("div",Vo,[o[54]||(o[54]=e("h3",null,"Essay / Personal Statement",-1)),e("p",Ho,i(t.essay),1)])):_("",!0),t.additional_info.extracurriculars||t.additional_info.awards?(a(),l("div",Uo,[o[57]||(o[57]=e("h3",null,"Additional Information",-1)),t.additional_info.extracurriculars?(a(),l("div",Jo,[o[55]||(o[55]=e("strong",null,"Extracurricular Activities:",-1)),e("p",Ko,i(t.additional_info.extracurriculars),1)])):_("",!0),t.additional_info.awards?(a(),l("div",Qo,[o[56]||(o[56]=e("strong",null,"Previous Awards / Achievements:",-1)),e("p",Xo,i(t.additional_info.awards),1)])):_("",!0)])):_("",!0),e("div",Wo,[e("h3",null,"Documents ("+i(g.value.length)+")",1),g.value.length>0?(a(),l("ul",Zo,[(a(!0),l(x,null,D(g.value,s=>(a(),l("li",{key:s.id},i(s.file_name)+" ("+i(s.document_type)+")",1))),128))])):(a(),l("p",et,"No documents uploaded."))]),e("div",ot,[o[58]||(o[58]=e("goa-callout",{type:"information",heading:"Privacy Notice (FOIP)"},[e("p",null,"The personal information on this form is collected under the authority of the Post-secondary Learning Act and the Freedom of Information and Protection of Privacy Act. The information will be used to assess your eligibility for scholarships and awards. Questions about this collection can be directed to Student Financial Assistance, Alberta Advanced Education.")],-1)),e("div",tt,[e("goa-checkbox",{name:"privacy_consent",checked:t.privacy_consent,on_change:o[17]||(o[17]=s=>t.privacy_consent=s.detail.checked),text:"I have read and agree to the Privacy Notice above"},null,40,st),e("goa-checkbox",{name:"declaration",checked:t.declaration_signed,on_change:o[18]||(o[18]=s=>t.declaration_signed=s.detail.checked),text:"I declare that the information provided is true and complete to the best of my knowledge"},null,40,it)])])])):_("",!0),e("div",nt,[c.value>0?(a(),l("goa-button",{key:0,type:"secondary",on_click:z}," Previous ",32)):_("",!0),e("div",at,[e("goa-button",{type:"tertiary",on_click:E,disabled:b.value},i(b.value?"Saving...":"Save Draft"),41,lt),c.value<4?(a(),l("goa-button",{key:0,type:"primary",on_click:C}," Next ",32)):_("",!0),c.value===4?(a(),l("goa-button",{key:1,type:"primary",on_click:O,disabled:w.value||!t.privacy_consent||!t.declaration_signed},i(w.value?"Submitting...":"Submit Application"),41,rt)):_("",!0)])])])):_("",!0),I.value?(a(),l("div",dt,[e("goa-callout",ut,[e("p",null,[o[61]||(o[61]=u("Your application ",-1)),e("strong",null,i(p.value.reference_number),1),o[62]||(o[62]=u(" for ",-1)),e("strong",null,i(N.value),1),o[63]||(o[63]=u(" has been submitted successfully.",-1))]),o[64]||(o[64]=e("p",null,"You will receive a notification when your application status changes.",-1))]),e("div",_t,[e("goa-button",{type:"primary",on_click:o[19]||(o[19]=s=>n.$router.push("/dashboard"))},"Go to Dashboard",32),e("goa-button",{type:"secondary",on_click:o[20]||(o[20]=s=>n.$router.push("/scholarships"))},"Browse More Scholarships",32)])])):_("",!0)]))}},mt=T(ct,[["__scopeId","data-v-feb92054"]]);export{mt as default};
//# sourceMappingURL=ApplicationForm-D4hgSfHA.js.map
