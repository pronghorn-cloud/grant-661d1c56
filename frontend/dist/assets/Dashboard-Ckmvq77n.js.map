{"version":3,"file":"Dashboard-Ckmvq77n.js","sources":["../../src/views/Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard-page\">\n    <div v-if=\"loading\" class=\"loading\">\n      <goa-circular-progress size=\"large\"></goa-circular-progress>\n    </div>\n\n    <div v-else>\n      <header class=\"page-header\">\n        <h1>{{ isStaff ? 'Staff Dashboard' : 'My Dashboard' }}</h1>\n        <p>Welcome back, {{ profile?.display_name || user?.displayName || 'User' }}</p>\n      </header>\n\n      <!-- Profile setup prompt for new applicants -->\n      <goa-callout v-if=\"!isStaff && !profileComplete\" type=\"important\" heading=\"Complete Your Profile\">\n        <p>You need to complete your profile before you can apply for scholarships.</p>\n        <goa-button type=\"primary\" @_click=\"$router.push('/profile/setup')\">\n          Complete Profile\n        </goa-button>\n      </goa-callout>\n\n      <div v-if=\"isStaff\" class=\"staff-dashboard\">\n        <goa-callout type=\"information\" heading=\"Staff Dashboard\">\n          <p>Staff dashboard features will be implemented in upcoming use cases (UC-STAFF-01 through UC-STAFF-09).</p>\n          <p>Your role: <strong>{{ user?.role }}</strong></p>\n        </goa-callout>\n      </div>\n\n      <div v-else-if=\"profileComplete\" class=\"applicant-dashboard\">\n        <div class=\"dashboard-cards\">\n          <div class=\"dash-card\">\n            <h3>My Applications</h3>\n            <p class=\"dash-stat\">{{ applications.length }}</p>\n            <p class=\"dash-label\">Total Applications</p>\n          </div>\n          <div class=\"dash-card\">\n            <h3>Drafts</h3>\n            <p class=\"dash-stat\">{{ draftCount }}</p>\n            <p class=\"dash-label\">In Progress</p>\n          </div>\n          <div class=\"dash-card\">\n            <h3>Submitted</h3>\n            <p class=\"dash-stat\">{{ submittedCount }}</p>\n            <p class=\"dash-label\">Under Review</p>\n          </div>\n        </div>\n\n        <section v-if=\"applications.length > 0\" class=\"apps-section\">\n          <h2>Recent Applications</h2>\n          <div class=\"apps-list\">\n            <div v-for=\"app in applications\" :key=\"app.id\" class=\"app-row\">\n              <div class=\"app-info\">\n                <strong>{{ app.scholarship_name }}</strong>\n                <span class=\"app-ref\">Ref: {{ app.reference_number }} | {{ formatDate(app.submitted_at || app.created_at) }}</span>\n              </div>\n              <div class=\"app-actions\">\n                <span class=\"status-badge\" :class=\"app.status.toLowerCase().replace(/\\s+/g, '-')\">\n                  {{ app.status }}\n                </span>\n                <goa-button v-if=\"app.status === 'Draft'\" type=\"primary\" size=\"compact\" @_click=\"$router.push('/apply/' + app.scholarship_id)\">\n                  Continue\n                </goa-button>\n                <goa-button v-if=\"canWithdraw(app.status)\" type=\"tertiary\" size=\"compact\" @_click=\"withdrawApp(app.id)\">\n                  Withdraw\n                </goa-button>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <div v-else class=\"empty-state\">\n          <p>You haven't submitted any applications yet.</p>\n          <goa-button type=\"primary\" @_click=\"$router.push('/scholarships')\">\n            Browse Scholarships\n          </goa-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { getStoredUser } from '@/services/authService';\nimport { profileAPI } from '@/services/profileService';\nimport { applicationsAPI } from '@/services/applicationService';\n\nconst router = useRouter();\nconst user = getStoredUser();\nconst loading = ref(true);\nconst profile = ref(null);\nconst profileComplete = ref(false);\nconst applications = ref([]);\n\nconst staffRoles = ['scholarship_staff', 'scholarship_manager', 'admin', 'superadmin', 'finance'];\nconst isStaff = computed(() => user && staffRoles.includes(user.role));\n\nconst draftCount = computed(() => applications.value.filter(a => a.status === 'Draft').length);\nconst submittedCount = computed(() => applications.value.filter(a => a.status === 'Submitted' || a.status === 'Under Review').length);\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return '';\n  return new Date(dateStr).toLocaleDateString('en-CA', { year: 'numeric', month: 'short', day: 'numeric' });\n}\n\nfunction canWithdraw(status) {\n  return ['Draft', 'Submitted', 'Under Review', 'Missing Info'].includes(status);\n}\n\nasync function withdrawApp(appId) {\n  try {\n    await applicationsAPI.withdraw(appId);\n    const app = applications.value.find(a => a.id === appId);\n    if (app) app.status = 'Withdrawn';\n  } catch (err) {\n    console.error('Failed to withdraw:', err);\n  }\n}\n\nonMounted(async () => {\n  try {\n    if (isStaff.value) {\n      router.replace('/staff/dashboard');\n      return;\n    }\n    const [profileRes, appsRes] = await Promise.all([\n      profileAPI.getProfile(),\n      applicationsAPI.getMyApplications().catch(() => ({ data: [] }))\n    ]);\n    const profileData = profileRes?.data || profileRes;\n    profile.value = profileData;\n    profileComplete.value = !!(profileData?.first_name && profileData?.last_name && profileData?.date_of_birth);\n    applications.value = appsRes?.data || appsRes || [];\n  } catch {\n    profileComplete.value = false;\n  } finally {\n    loading.value = false;\n  }\n});\n</script>\n\n<style scoped>\n.dashboard-page {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.loading {\n  display: flex;\n  justify-content: center;\n  padding: var(--goa-space-xl);\n}\n\n.page-header {\n  margin-bottom: var(--goa-space-l);\n}\n\n.page-header h1 {\n  font-size: var(--goa-font-size-7);\n  font-weight: var(--goa-font-weight-bold);\n  margin-bottom: var(--goa-space-xs);\n}\n\n.page-header p {\n  color: var(--goa-color-text-secondary);\n}\n\n.dashboard-cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: var(--goa-space-m);\n  margin-bottom: var(--goa-space-xl);\n}\n\n.dash-card {\n  padding: var(--goa-space-l);\n  background: var(--goa-color-greyscale-white);\n  border: 1px solid var(--goa-color-greyscale-200);\n  border-radius: var(--goa-border-radius-m);\n  text-align: center;\n}\n\n.dash-card h3 {\n  font-size: var(--goa-font-size-3);\n  color: var(--goa-color-text-secondary);\n  margin-bottom: var(--goa-space-xs);\n}\n\n.dash-stat {\n  font-size: var(--goa-font-size-8);\n  font-weight: var(--goa-font-weight-bold);\n  color: var(--goa-color-interactive-default);\n}\n\n.dash-label {\n  font-size: var(--goa-font-size-2);\n  color: var(--goa-color-text-secondary);\n}\n\n.apps-section h2 {\n  font-size: var(--goa-font-size-5);\n  font-weight: var(--goa-font-weight-bold);\n  margin-bottom: var(--goa-space-m);\n}\n\n.app-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--goa-space-m);\n  border-bottom: 1px solid var(--goa-color-greyscale-200);\n}\n\n.app-info {\n  display: flex;\n  flex-direction: column;\n  gap: var(--goa-space-2xs);\n}\n\n.app-ref {\n  font-size: var(--goa-font-size-2);\n  color: var(--goa-color-text-secondary);\n}\n\n.status-badge {\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: var(--goa-font-size-2);\n  font-weight: var(--goa-font-weight-bold);\n}\n\n.app-actions {\n  display: flex;\n  align-items: center;\n  gap: var(--goa-space-s);\n}\n\n.status-badge.draft { background: #e8f0fe; color: #1a73e8; }\n.status-badge.submitted { background: #fef7e0; color: #b06000; }\n.status-badge.under-review { background: #e8f0fe; color: #1a73e8; }\n.status-badge.missing-info { background: #fef7e0; color: #b06000; }\n.status-badge.approved { background: #e6f4ea; color: #137333; }\n.status-badge.rejected { background: #fce8e6; color: #c5221f; }\n.status-badge.withdrawn { background: var(--goa-color-greyscale-200); color: var(--goa-color-text-secondary); }\n.status-badge.paid { background: #e6f4ea; color: #137333; }\n\n.empty-state {\n  text-align: center;\n  padding: var(--goa-space-xl);\n  color: var(--goa-color-text-secondary);\n}\n\n.empty-state p {\n  margin-bottom: var(--goa-space-m);\n}\n\n@media (max-width: 768px) {\n  .dashboard-cards {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n"],"names":["router","useRouter","user","getStoredUser","loading","ref","profile","profileComplete","applications","staffRoles","isStaff","computed","draftCount","a","submittedCount","formatDate","dateStr","canWithdraw","status","withdrawApp","appId","applicationsAPI","app","err","onMounted","profileRes","appsRes","profileAPI","profileData","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_hoisted_4","_toDisplayString","_a","_unref","_hoisted_5","$event","$router","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_Fragment","_renderList","_hoisted_18","_hoisted_19","_hoisted_20","_normalizeClass","_hoisted_21","_hoisted_22","_hoisted_23"],"mappings":"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"}