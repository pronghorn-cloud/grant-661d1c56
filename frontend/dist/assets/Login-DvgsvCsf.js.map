{"version":3,"file":"Login-DvgsvCsf.js","sources":["../../src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-container\">\n      <div class=\"login-header\">\n        <h1>AE Online Scholarships</h1>\n        <p>Sign in to access scholarship applications and services</p>\n      </div>\n\n      <div class=\"login-options\">\n        <!-- Applicant Login (ACA) -->\n        <div class=\"login-card\">\n          <h2>Applicants</h2>\n          <p>Sign in with your Alberta.ca Account to apply for scholarships.</p>\n          <goa-button type=\"primary\" @_click=\"loginWithACA\">\n            Sign in with Alberta.ca Account\n          </goa-button>\n        </div>\n\n        <!-- Staff Login (Microsoft) -->\n        <div class=\"login-card\">\n          <h2>Staff</h2>\n          <p>Sign in with your Government of Alberta Microsoft account.</p>\n          <goa-button type=\"secondary\" @_click=\"loginWithMicrosoft\">\n            Sign in with Microsoft (Staff)\n          </goa-button>\n        </div>\n      </div>\n\n      <!-- Dev Login (development only) -->\n      <div v-if=\"isDev\" class=\"dev-login\">\n        <goa-callout type=\"information\" heading=\"Development Login\">\n          <p>Quick login for development and testing.</p>\n          <div class=\"dev-login-form\">\n            <goa-form-item label=\"Email\">\n              <goa-input\n                :value=\"devEmail\"\n                @_change=\"(e) => devEmail = e.detail.value\"\n                placeholder=\"test@alberta.ca\"\n              ></goa-input>\n            </goa-form-item>\n            <goa-button type=\"tertiary\" @_click=\"handleDevLogin\">\n              Dev Login\n            </goa-button>\n          </div>\n        </goa-callout>\n      </div>\n\n      <div v-if=\"error\" class=\"error-message\">\n        <goa-callout type=\"emergency\" heading=\"Sign In Error\">\n          <p>{{ error }}</p>\n        </goa-callout>\n      </div>\n\n      <div v-if=\"loading\" class=\"loading\">\n        <goa-circular-progress size=\"large\"></goa-circular-progress>\n        <p>Signing in...</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { login } from '@/services/authService';\n\nconst router = useRouter();\nconst loading = ref(false);\nconst error = ref(null);\nconst devEmail = ref('test@alberta.ca');\n\nconst isDev = import.meta.env.DEV || import.meta.env.VITE_API_URL?.includes('localhost');\n\nasync function loginWithACA() {\n  loading.value = true;\n  error.value = null;\n  try {\n    // Mock ACA SSO - in production, this would redirect to ACA OIDC\n    const user = await login('aca', {\n      email: 'applicant@alberta.ca',\n      displayName: 'John Applicant',\n      acaId: 'aca-mock-001'\n    });\n    redirectAfterLogin(user);\n  } catch (err) {\n    error.value = err.message || 'Failed to sign in with Alberta.ca Account';\n  } finally {\n    loading.value = false;\n  }\n}\n\nasync function loginWithMicrosoft() {\n  loading.value = true;\n  error.value = null;\n  try {\n    // Mock Microsoft SSO - in production, this would redirect to Entra ID\n    const user = await login('microsoft', {\n      email: 'staff@gov.ab.ca',\n      displayName: 'Jane Staff',\n      msId: 'ms-mock-001'\n    });\n    redirectAfterLogin(user);\n  } catch (err) {\n    error.value = err.message || 'Failed to sign in with Microsoft';\n  } finally {\n    loading.value = false;\n  }\n}\n\nasync function handleDevLogin() {\n  loading.value = true;\n  error.value = null;\n  try {\n    const user = await login('dev', {\n      email: devEmail.value\n    });\n    redirectAfterLogin(user);\n  } catch (err) {\n    error.value = err.message || 'Failed to sign in';\n  } finally {\n    loading.value = false;\n  }\n}\n\nfunction redirectAfterLogin(user) {\n  const staffRoles = ['scholarship_staff', 'scholarship_manager', 'admin', 'superadmin', 'finance'];\n  if (staffRoles.includes(user.role)) {\n    router.push('/staff/dashboard');\n  } else {\n    router.push('/scholarships');\n  }\n}\n</script>\n\n<style scoped>\n.login-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 60vh;\n  padding: var(--goa-space-xl);\n}\n\n.login-container {\n  max-width: 700px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: var(--goa-space-l);\n}\n\n.login-header {\n  text-align: center;\n}\n\n.login-header h1 {\n  font-size: var(--goa-font-size-7);\n  font-weight: var(--goa-font-weight-bold);\n  color: var(--goa-color-text-default);\n  margin-bottom: var(--goa-space-s);\n}\n\n.login-header p {\n  font-size: var(--goa-font-size-4);\n  color: var(--goa-color-text-secondary);\n}\n\n.login-options {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: var(--goa-space-l);\n}\n\n.login-card {\n  padding: var(--goa-space-l);\n  border: 1px solid var(--goa-color-greyscale-200);\n  border-radius: var(--goa-border-radius-m);\n  background: var(--goa-color-greyscale-white);\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  gap: var(--goa-space-m);\n}\n\n.login-card h2 {\n  font-size: var(--goa-font-size-5);\n  font-weight: var(--goa-font-weight-bold);\n  color: var(--goa-color-text-default);\n  margin-bottom: 0;\n}\n\n.login-card p {\n  color: var(--goa-color-text-secondary);\n  flex: 1;\n}\n\n.dev-login {\n  margin-top: var(--goa-space-m);\n}\n\n.dev-login-form {\n  display: flex;\n  flex-direction: column;\n  gap: var(--goa-space-m);\n  margin-top: var(--goa-space-m);\n}\n\n.loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--goa-space-m);\n  padding: var(--goa-space-l);\n}\n\n.error-message {\n  margin-top: var(--goa-space-m);\n}\n\n@media (max-width: 768px) {\n  .login-options {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n"],"names":["router","useRouter","loading","ref","error","devEmail","isDev","loginWithACA","user","login","redirectAfterLogin","err","loginWithMicrosoft","handleDevLogin","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_cache","_hoisted_5","_unref","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","e","_hoisted_11","_hoisted_12","_hoisted_13"],"mappings":"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"}