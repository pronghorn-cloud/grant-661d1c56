import{_ as N,e as q,k as S,o as a,c as i,a as e,t as v,d as y,F as c,f as p,m as P,w as k,r as d,p as F,u as x}from"./index-DDxpmVXJ.js";import{p as _}from"./profileService-sHpkJFtD.js";const A={class:"profile-setup"},I={key:0,type:"emergency",heading:"Error"},z={key:1,type:"important",heading:"Please fix the following:"},M={class:"form-section"},C={class:"form-grid"},E={class:"form-field"},O={label:"First Name",requirement:"required"},B=["value"],L={class:"form-field"},R={label:"Last Name",requirement:"required"},V=["value"],Y={class:"form-field"},G={label:"Date of Birth",requirement:"required",helptext:"You must be at least 16 years old"},T=["value"],U={class:"form-field"},j={label:"Social Insurance Number (SIN)",requirement:"required",helptext:"Format: NNN-NNN-NNN"},H=["value"],J={class:"form-field"},K={label:"Alberta Student Number (ASN)",helptext:"Optional"},Q=["value"],W={class:"form-field"},X={label:"Gender",helptext:"Optional"},Z=["value"],$={class:"form-field"},D={label:"Indigenous Status",helptext:"Optional - for First Nations, Metis, or Inuit applicants"},ee=["value"],te={class:"form-section"},oe={class:"form-grid"},se={class:"form-field"},ae={label:"Email",requirement:"required"},ie=["value"],le={class:"form-field"},ne={label:"Phone Number",requirement:"required",helptext:"10-digit number"},de=["value"],re={class:"form-section"},ue={class:"form-grid"},me={class:"form-field full-width"},_e={label:"Street Address",requirement:"required"},ve=["value"],ce={class:"form-field"},pe={label:"City",requirement:"required"},fe=["value"],ge={class:"form-field"},he={label:"Province",requirement:"required"},be=["value"],we=["value","label"],ye={class:"form-field"},Ne={label:"Postal Code",requirement:"required",helptext:"Format: A1A 1A1"},qe=["value"],Se={class:"form-section"},Pe={class:"form-grid"},ke={class:"form-field"},Fe={label:"Citizenship Status",requirement:"required"},xe=["value"],Ae=["value","label"],Ie={class:"form-field"},ze={label:"Alberta Resident?",requirement:"required"},Me=["value"],Ce={class:"form-actions"},Ee=["disabled"],Oe={__name:"ProfileSetup",setup(Be){const f=x(),r=d(!1),u=d(""),m=d([]),g=d([]),h=d([]),s=F({first_name:"",last_name:"",date_of_birth:"",sin:"",asn:"",email:"",phone:"",address_street:"",address_city:"",address_province:"",address_postal_code:"",citizenship_status:"",residency_status:"",indigenous_status:"",gender:""});q(async()=>{try{const[t,o]=await Promise.all([_.getLookup("citizenship_types"),_.getLookup("provinces")]);h.value=t.data||[],g.value=o.data||[]}catch(t){console.error("Failed to load lookups:",t)}const l=S();l&&(s.email=l.email||"");try{const t=await _.getProfile(),o=(t==null?void 0:t.data)||t;if(o!=null&&o.first_name&&(o!=null&&o.last_name)&&(o!=null&&o.date_of_birth)){f.push("/profile");return}o&&(o.first_name&&(s.first_name=o.first_name),o.last_name&&(s.last_name=o.last_name))}catch{}});async function b(){var l,t,o,w;u.value="",m.value=[],r.value=!0;try{const n={...s,residency_status:s.residency_status==="true"};await _.createProfile(n),f.push("/dashboard")}catch(n){(t=(l=n.response)==null?void 0:l.data)!=null&&t.errors?m.value=n.response.data.errors:u.value=((w=(o=n.response)==null?void 0:o.data)==null?void 0:w.message)||"Failed to save profile. Please try again."}finally{r.value=!1}}return(l,t)=>(a(),i("div",A,[t[23]||(t[23]=e("header",{class:"page-header"},[e("h1",null,"Complete Your Profile"),e("p",null,"Please fill in your information to get started with scholarship applications.")],-1)),u.value?(a(),i("goa-callout",I,[e("p",null,v(u.value),1)])):y("",!0),m.value.length>0?(a(),i("goa-callout",z,[e("ul",null,[(a(!0),i(c,null,p(m.value,o=>(a(),i("li",{key:o},v(o),1))),128))])])):y("",!0),e("form",{onSubmit:k(b,["prevent"])},[e("section",M,[t[16]||(t[16]=e("h2",null,"Personal Information",-1)),e("div",C,[e("div",E,[e("goa-form-item",O,[e("goa-input",{name:"first_name",value:s.first_name,on_change:t[0]||(t[0]=o=>s.first_name=o.detail.value),width:"100%"},null,40,B)])]),e("div",L,[e("goa-form-item",R,[e("goa-input",{name:"last_name",value:s.last_name,on_change:t[1]||(t[1]=o=>s.last_name=o.detail.value),width:"100%"},null,40,V)])]),e("div",Y,[e("goa-form-item",G,[e("goa-input",{name:"date_of_birth",type:"date",value:s.date_of_birth,on_change:t[2]||(t[2]=o=>s.date_of_birth=o.detail.value),width:"100%"},null,40,T)])]),e("div",U,[e("goa-form-item",j,[e("goa-input",{name:"sin",value:s.sin,on_change:t[3]||(t[3]=o=>s.sin=o.detail.value),width:"100%"},null,40,H)])]),e("div",J,[e("goa-form-item",K,[e("goa-input",{name:"asn",value:s.asn,on_change:t[4]||(t[4]=o=>s.asn=o.detail.value),width:"100%"},null,40,Q)])]),e("div",W,[e("goa-form-item",X,[e("goa-dropdown",{name:"gender",value:s.gender,on_change:t[5]||(t[5]=o=>s.gender=o.detail.value)},[...t[14]||(t[14]=[P('<goa-dropdown-item value="" label="Prefer not to say" data-v-219a1cc3></goa-dropdown-item><goa-dropdown-item value="Male" label="Male" data-v-219a1cc3></goa-dropdown-item><goa-dropdown-item value="Female" label="Female" data-v-219a1cc3></goa-dropdown-item><goa-dropdown-item value="Non-binary" label="Non-binary" data-v-219a1cc3></goa-dropdown-item><goa-dropdown-item value="Other" label="Other" data-v-219a1cc3></goa-dropdown-item>',5)])],40,Z)])]),e("div",$,[e("goa-form-item",D,[e("goa-dropdown",{name:"indigenous_status",value:s.indigenous_status,on_change:t[6]||(t[6]=o=>s.indigenous_status=o.detail.value)},[...t[15]||(t[15]=[e("goa-dropdown-item",{value:"",label:"N/A"},null,-1),e("goa-dropdown-item",{value:"First Nations",label:"First Nations"},null,-1),e("goa-dropdown-item",{value:"Metis",label:"Metis"},null,-1),e("goa-dropdown-item",{value:"Inuit",label:"Inuit"},null,-1)])],40,ee)])])])]),e("section",te,[t[17]||(t[17]=e("h2",null,"Contact Information",-1)),e("div",oe,[e("div",se,[e("goa-form-item",ae,[e("goa-input",{name:"email",type:"email",value:s.email,disabled:"true",width:"100%"},null,8,ie)])]),e("div",le,[e("goa-form-item",ne,[e("goa-input",{name:"phone",value:s.phone,on_change:t[7]||(t[7]=o=>s.phone=o.detail.value),width:"100%"},null,40,de)])])])]),e("section",re,[t[19]||(t[19]=e("h2",null,"Mailing Address",-1)),e("div",ue,[e("div",me,[e("goa-form-item",_e,[e("goa-input",{name:"address_street",value:s.address_street,on_change:t[8]||(t[8]=o=>s.address_street=o.detail.value),width:"100%"},null,40,ve)])]),e("div",ce,[e("goa-form-item",pe,[e("goa-input",{name:"address_city",value:s.address_city,on_change:t[9]||(t[9]=o=>s.address_city=o.detail.value),width:"100%"},null,40,fe)])]),e("div",ge,[e("goa-form-item",he,[e("goa-dropdown",{name:"address_province",value:s.address_province,on_change:t[10]||(t[10]=o=>s.address_province=o.detail.value)},[t[18]||(t[18]=e("goa-dropdown-item",{value:"",label:"Select province"},null,-1)),(a(!0),i(c,null,p(g.value,o=>(a(),i("goa-dropdown-item",{key:o.code,value:o.code,label:o.label},null,8,we))),128))],40,be)])]),e("div",ye,[e("goa-form-item",Ne,[e("goa-input",{name:"address_postal_code",value:s.address_postal_code,on_change:t[11]||(t[11]=o=>s.address_postal_code=o.detail.value),width:"100%"},null,40,qe)])])])]),e("section",Se,[t[22]||(t[22]=e("h2",null,"Citizenship & Residency",-1)),e("div",Pe,[e("div",ke,[e("goa-form-item",Fe,[e("goa-dropdown",{name:"citizenship_status",value:s.citizenship_status,on_change:t[12]||(t[12]=o=>s.citizenship_status=o.detail.value)},[t[20]||(t[20]=e("goa-dropdown-item",{value:"",label:"Select status"},null,-1)),(a(!0),i(c,null,p(h.value,o=>(a(),i("goa-dropdown-item",{key:o.code,value:o.code,label:o.label},null,8,Ae))),128))],40,xe)])]),e("div",Ie,[e("goa-form-item",ze,[e("goa-dropdown",{name:"residency_status",value:s.residency_status,on_change:t[13]||(t[13]=o=>s.residency_status=o.detail.value)},[...t[21]||(t[21]=[e("goa-dropdown-item",{value:"",label:"Select"},null,-1),e("goa-dropdown-item",{value:"true",label:"Yes"},null,-1),e("goa-dropdown-item",{value:"false",label:"No"},null,-1)])],40,Me)])])])]),e("div",Ce,[e("goa-button",{type:"primary",on_click:b,disabled:r.value},v(r.value?"Saving...":"Save Profile"),41,Ee)])],32)]))}},Ve=N(Oe,[["__scopeId","data-v-219a1cc3"]]);export{Ve as default};
//# sourceMappingURL=ProfileSetup-XRQZgiCJ.js.map
